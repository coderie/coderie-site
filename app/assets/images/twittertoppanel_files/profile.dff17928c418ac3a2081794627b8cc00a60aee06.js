define("app/ui/profile/add_header_callout",["module","require","exports","core/component"],function(module, require, exports) {
function addHeaderCallout(){this.requestHeaderEditing=function(){this.trigger("uiEditProfileInitializeAndFocusOnHeaderOptions",{scribeElement:"add_header_callout"})},this.disableCallout=function(){this.$node.hide()},this.after("initialize",function(){this.on("click",this.requestHeaderEditing),this.on(document,"uiProfileHeaderUpdated",this.disableCallout)})}var defineComponent=require("core/component");module.exports=defineComponent(addHeaderCallout)
});
define("app/data/async_profile",["module","require","exports","core/component","app/data/with_data"],function(module, require, exports) {
function asyncProfileData(){this.defaultAttrs({noShowError:!0}),this.saveField=function(a,b){this.fields[b.field]=b.newValue},this.clearFields=function(){this.fields={},this.validationErrors=[]},this.addValidationError=function(a,b){this.validationErrors.push(b.message)},this.validateAndSaveProfile=function(a,b){a.preventDefault(),this.validateProfile()&&this.saveProfile(b)},this.validateProfile=function(){return this.validationErrors.length>0?(this.saveProfileFailed({message:this.validationErrors.join(", ")}),!1):!0},this.saveProfile=function(a){Object.keys(this.fields).length>0?(this.trigger("dataInlineEditSaveStarted"),this.fields.page_context=this.attr.pageName,this.fields.section_context=this.attr.sectionName,this.post({url:"/i/profiles/update",data:this.fields,eventData:a,success:this.saveProfileSucceeded.bind(this),error:this.saveProfileFailed.bind(this)})):this.trigger("dataInlineEditSaveSuccess")},this.saveProfileSucceeded=function(a){if(a.error===!0)return this.saveProfileFailed.call(this,a);this.trigger("dataInlineEditSaveSuccess",a),this.clearFields()},this.saveProfileFailed=function(a){this.trigger("dataInlineEditSaveError",a),this.clearFields()},this.after("initialize",function(){this.fields={},this.validationErrors=[],this.on("uiInlineEditSave",this.saveField),this.on("uiInlineEditSaveValidationError",this.addValidationError),this.on("uiEditProfileSave",this.validateAndSaveProfile)})}var defineComponent=require("core/component"),withData=require("app/data/with_data");module.exports=defineComponent(asyncProfileData,withData)
});
define("app/ui/compose/bio_composer",["module","require","exports","core/component","app/ui/compose/with_character_counter","app/ui/compose/with_rich_editor","app/ui/compose/with_rtl_tweet_box","app/ui/compose/with_text_editor"],function(module, require, exports) {
function bioComposer(){this.determinePlaceholderVisibility=function(){this.$text.toggleClass("is-showPlaceholder",!this.getVisibleText().trim())},this.reset=function(){},this.syncValue=function(){var a=this.getVisibleText().trim();this.oldTextValue!==a&&this.trigger("uiInlineEditSave",{newValue:a,field:this.$text.attr("name")})},this.saveOldValue=function(){this.oldTextValue=this.getVisibleText().trim()},this.resetToOldValue=function(){this.setVisibleText(this.oldTextValue)},this.updateProfileField=function(){var a=$(this.attr.globalProfileFieldSelector);this.getVisibleText().trim()||a.html(""),a.attr("dir",this.$text.attr("dir"))},this.after("initialize",function(){this.initTextNode(),this.determinePlaceholderVisibility(),this.on("uiTextChanged",this.determinePlaceholderVisibility),this.on(document,"uiEditProfileSaveFields",this.syncValue),this.on(document,"uiEditProfileStart",this.saveOldValue),this.on(document,"uiEditProfileCancel",this.resetToOldValue),this.on(document,"uiEditProfileEnd",this.updateProfileField)})}var defineComponent=require("core/component"),withCounter=require("app/ui/compose/with_character_counter"),withRichEditor=require("app/ui/compose/with_rich_editor"),withRTL=require("app/ui/compose/with_rtl_tweet_box"),withTextEditor=require("app/ui/compose/with_text_editor"),BioComposer=defineComponent(bioComposer,withTextEditor,withRichEditor,withCounter,withRTL);module.exports=BioComposer
});
define("app/ui/with_date_selector",["module","require","exports"],function(module, require, exports) {
function withDateSelector(){this.defaultAttrs({genericSelectSelector:".js-dateSelector",daySelectSelector:".js-dateSelectDay",monthSelectSelector:".js-dateSelectMonth",yearSelectSelector:".js-dateSelectYear",missingFieldClass:"is-missing",maximumDateAvailable:undefined}),this.dayOptions,this.monthOptions,this.yearOptions,this.isLeapYear=function(a){return a%4==0&&a%100!=0||a%400==0},this.getDaysInMonth=function(a,b){var c=+a||1,d=+(b||this.yearOptions[1].value);switch(c){case 2:return this.isLeapYear(d)?29:28;case 4:case 6:case 9:case 11:return 30;default:return 31}},this.getDateSelected=function(){var a=this.select("daySelectSelector"),b=this.select("monthSelectSelector"),c=this.select("yearSelectSelector");return{day:a.val(),month:b.val(),year:c.val()}},this.getDateSelectedData=function(){var a=this.select("daySelectSelector"),b=this.select("monthSelectSelector"),c=this.select("yearSelectSelector");return{day:{value:a.val(),name:a.attr("name"),type:"date_select"},month:{value:b.val(),name:b.attr("name"),type:"date_select"},year:{value:c.val(),name:c.attr("name"),type:"date_select"}}},this.setDateSelectorOption=function(a,b){var c=this.select("genericSelectSelector").filter('[name="'+a+'"]');c.val(b),this.updateDateOptions()},this.hasSelectedMaximumYear=function(a){return this.attr.maximumDateAvailable&&a.year>=this.attr.maximumDateAvailable.year},this.hasSelectedMaximumMonth=function(a){return this.attr.maximumDateAvailable&&a.month>=this.attr.maximumDateAvailable.month},this.updateDateOptions=function(){this.setFieldsWidth(),this.updateYearOptions(),this.updateMonthOptions(),this.updateDayOptions(),this.swapSelectedAttrs(),this.trigger("uiDateSelectorOptionsChanged",this.getDateSelectedData())},this.setFieldsWidth=function(){this.select("daySelectSelector").css({width:this.select("daySelectSelector").css("width")}),this.select("monthSelectSelector").css({width:this.select("monthSelectSelector").css("width")}),this.select("yearSelectSelector").css({width:this.select("yearSelectSelector").css("width")})},this.updateDayOptions=function(){var a=this.select("daySelectSelector"),b=this.getDateSelected(),c=this.getDaysInMonth(b.month,b.year),d=this.hasSelectedMaximumYear(b)&&this.hasSelectedMaximumMonth(b),e=daySelected=b.day,f=this.dayOptions.filter(function(a,b){var e=+b.value;return d?e<=this.attr.maximumDateAvailable.day:e<=c}.bind(this));daySelected>0&&d&&daySelected>=this.attr.maximumDateAvailable.day?e=this.attr.maximumDateAvailable.day:daySelected>0&&daySelected>c&&(e=c),a.empty().append(f).val(e);var g=e==0&&(b.year>0||b.month>0);a.toggleClass(this.attr.missingFieldClass,g)},this.updateMonthOptions=function(){var a=this.select("monthSelectSelector"),b=this.getDateSelected(),c=this.monthOptions,d=monthSelected=b.month;this.hasSelectedMaximumYear(b)&&(c=c.filter(function(a,c){var d=+c.value;return d==this.attr.maximumDateAvailable.month&&b.day<=this.attr.maximumDateAvailable.day||d<this.attr.maximumDateAvailable.month}.bind(this)),monthSelected>0&&monthSelected>this.attr.maximumDateAvailable.month&&(d=this.attr.maximumDateAvailable.month)),a.empty().append(c).val(d);var e=d==0&&(b.year>0||b.day>0);a.toggleClass(this.attr.missingFieldClass,e)},this.updateYearOptions=function(){var a=this.select("yearSelectSelector"),b=this.getDateSelected(),c=this.yearOptions,d=yearSelected=b.year;this.hasSelectedMaximumMonth(b)&&(b.month>this.attr.maximumDateAvailable.month||b.day>this.attr.maximumDateAvailable.day)&&(c=c.filter(function(a,b){var c=+b.value;return c<this.attr.maximumDateAvailable.year}.bind(this)),yearSelected==this.attr.maximumDateAvailable.year&&(d=this.attr.maximumDateAvailable.year-1)),a.empty().append(c).val(d);var e=d==0&&(b.month>0||b.day>0);a.toggleClass(this.attr.missingFieldClass,e)},this.swapSelectedAttrs=function(){var a=this.getDateSelected();this.dayOptions.removeAttr("selected").filter('[value="'+a.day+'"]').attr("selected",!0),this.monthOptions.removeAttr("selected").filter('[value="'+a.month+'"]').attr("selected",!0),this.yearOptions.removeAttr("selected").filter('[value="'+a.year+'"]').attr("selected",!0)},this.after("initialize",function(){this.dayOptions=this.select("daySelectSelector").find("option"),this.monthOptions=this.select("monthSelectSelector").find("option"),this.yearOptions=this.select("yearSelectSelector").find("option"),this.on(document,"uiEditProfileStart",this.updateDateOptions),this.on("change",{genericSelectSelector:this.updateDateOptions})})}module.exports=withDateSelector
});
define("app/ui/with_visibility_settings",["module","require","exports"],function(module, require, exports) {
function withVisibilitySettings(){this.defaultAttrs({settingsSelector:".VisibilitySettings",dropdownIconSelector:".VisibilitySettings-dropdownIcon",selectedDropdownIconSelector:".VisibilitySettings-dropdownIcon:not(.u-hidden)",hiddenClass:"u-hidden",hiddenSelector:".u-hidden",visibilityButtonSelector:".VisibilitySettings-button",visibilityOptionSelector:".VisibilitySettings-option",visibilityRadioSelector:".js-visibilitySettingsRadio"}),this.updateSelectionFromEvent=function(a){var b=$(a.target).closest(this.attr.visibilityOptionSelector);this.updateSelection(b)},this.updateSelection=function(a){var b=a.closest(this.attr.settingsSelector),c=a.find(this.attr.visibilityRadioSelector),d=b.find(this.attr.visibilityButtonSelector),e=b.find(this.attr.dropdownIconSelector),f=b.find(this.attr.selectedDropdownIconSelector),g=c.data("dropdown-icon-selector");this.clearSelection(b),c.prop("checked",!0),f.addClass(this.attr.hiddenClass),e.filter(g).removeClass(this.attr.hiddenClass),d.attr("data-original-title",c.data("setting-name")),this.trigger("uiVisibilitySettingSelected",this.getSelectedVisibilitySettingsData())},this.setVisibilitySettingOption=function(a,b){var c=this.$node.find('input[name="'+a+'"][value="'+b+'"]'),d=c.closest(this.attr.visibilityOptionSelector);this.updateSelection(d)},this.clearSelection=function(a){a.find(this.attr.visibilityRadioSelector).each(function(a,b){$(b).removeProp("checked")})},this.hideOptions=function(a,b){var c=a.find(this.attr.visibilityOptionSelector);c.each(function(a,c){var d=$(c);typeof b=="function"&&b(d)&&d.addClass(this.attr.hiddenClass)}.bind(this));if(this.selectedOptionIsHidden(a)){var d=c.not(this.attr.hiddenSelector).first();this.updateSelection(d)}},this.selectedOptionIsHidden=function(a){return a.find(this.attr.visibilityRadioSelector).filter(":checked").closest(this.attr.visibilityOptionSelector).hasClass(this.attr.hiddenClass)},this.unhideOptions=function(a,b){a.find(this.attr.visibilityOptionSelector).each(function(a,c){var d=$(c);(typeof b=="function"&&b(d)||typeof b=="undefined")&&d.removeClass(this.attr.hiddenClass)}.bind(this))},this.getSelectedVisibilitySettingsData=function(){var a={};return this.select("visibilityRadioSelector").filter(":checked").each(function(b,c){var d=$(c);a[d.attr("name")]=this.getRadioOptionData(d)}.bind(this)),a},this.getRadioOptionData=function(a){return{value:a.val(),name:a.attr("name"),type:"visibility_setting"}},this.after("initialize",function(){this.on("click",{visibilityOptionSelector:this.updateSelectionFromEvent})})}module.exports=withVisibilitySettings
});
define("app/ui/with_popover",["module","require","exports"],function(module, require, exports) {
function withPopover(){this.addPopover=function(a){this.$popover?this.hideAndClearPopover():this.initializePopover(),this.$popoverText.html(a),this.$node.append(this.$popover)},this.hideAndClearPopover=function(){this.$popover&&this.$popoverText&&(this.$popover.remove(),this.$popoverText.empty())},this.initializePopover=function(){this.$popover=$('<div class="Popover"><div class="Popover-text"></div></div>"'),this.$popoverText=this.$popover.children(),this.$node.addClass("Popover-container"),this.on(this.$popover,"click",this.hideAndClearPopover)}}module.exports=withPopover
});
define("app/ui/profile/birthdate_select",["module","require","exports","core/i18n","core/component","app/ui/with_date_selector","app/ui/with_dropdown","app/ui/with_visibility_settings","app/ui/with_popover","app/utils/storage/core","app/data/user_info","core/utils"],function(module, require, exports) {
function birthdateSelect(){this.defaultAttrs({buttonSelector:".BirthdateSelect-button",fieldsSelector:".BirthdateSelect-fields",birthyearSelector:".BirthdateSelect-birthyear",expandedClass:"is-expanded",hasShownWarningPopoverClass:"hasShownWarningPopover",notSetClass:"is-notSet",showFieldsAnimationDuration:550,minAgeForYearVisibility:18,shouldShowVisibilityPopover:!1,visibilitySettingsLearnMorePath:null,userId:null}),this.localStorage=new Storage("dob_select"),this.initialBirthdateData={},this.selectedBirthdateData={},this.showFields=function(){this.maybeAddVisibilityHelpPopover(),this.$node.addClass(this.attr.expandedClass),setTimeout(function(){this.select("fieldsSelector").addClass(this.attr.expandedClass)}.bind(this),this.attr.showFieldsAnimationDuration),this.trigger("uiBirthdateSelectFieldsExpanded")},this.resetFields=function(){this.$node.removeClass(this.attr.expandedClass),this.$node.removeClass(this.attr.hasShownWarningPopoverClass),this.selectedBirthdateData=this.initialBirthdateData,this.select("fieldsSelector").removeClass(this.attr.expandedClass)},this.updateYearVisibility=function(a,b){var c=this.select("birthyearSelector");this.shouldHideYearVisibility(b)?this.hideOptions(c,function(a){return a.data("option-value")>0}):this.unhideOptions(c)},this.shouldHideYearVisibility=function(a){var b=a.year.value,c=a.month.value,d=a.day.value,e=new Date,f=e.getUTCFullYear()-b,g=e.getUTCMonth()+1,h=e.getUTCDate(),i=f<this.attr.minAgeForYearVisibility,j=f==this.attr.minAgeForYearVisibility,k=j&&g<c,l=j&&g==c,m=l&&h<d;return i||k||m},this.initializeSelectedBirthdateData=function(){this.initialBirthdateData=this.selectedBirthdateData=utils.merge(this.getDateSelectedData(),this.getSelectedVisibilitySettingsData()),this.trigger("uiBirthdateSelectDataInitialized",this.selectedBirthdateData)},this.updateSelectedBirthdateData=function(a,b){this.selectedBirthdateData=utils.merge(this.selectedBirthdateData,b),this.trigger("uiBirthdateSelectDataUpdated",this.selectedBirthdateData),this.maybeAddBirthdateChangePopover()},this.setBirthdateSelectFields=function(a,b){Object.keys(b).forEach(function(a){var c=b[a];c.type=="date_select"?this.setDateSelectorOption(c.name,c.value):c.type=="visibility_setting"&&this.setVisibilitySettingOption(c.name,c.value)},this)},this.notifyInvalidDate=function(){var a=this.getDateSelected(),b;a.year==0&&a.month==0?b=_('Complete your birthday by entering the year and month'):a.year==0&&a.day==0?b=_('Complete your birthday by entering the year and day'):a.month==0&&a.day==0?b=_('Complete your birthday by entering the month and day'):a.year==0?b=_('Complete your birthday by entering the year'):a.month==0?b=_('Complete your birthday by entering the month'):a.day==0?b=_('Complete your birthday by entering the day'):b=_('Complete your birthday'),this.trigger("uiBirthdateSelectGotInvalidDateMessage",{message:b})},this.maybeAddBirthdateChangePopover=function(){!this.$node.hasClass(this.attr.hasShownWarningPopoverClass)&&this.isChangingDateFields()&&(this.addPopover(_('You can only change your birthday a limited number of times')),this.$node.addClass(this.attr.hasShownWarningPopoverClass))},this.isChangingDateFields=function(){return Object.keys(this.selectedBirthdateData).some(function(a){var b=this.selectedBirthdateData[a],c=this.initialBirthdateData[a];return b.type=="date_select"&&b.value>0&&c.value>0&&b.value!=c.value},this)},this.maybeAddVisibilityHelpPopover=function(){if(this.attr.shouldShowVisibilityPopover&&!this.localStorage.getItem(this.popoverStorageKey)){this.localStorage.setItem(this.popoverStorageKey,!0);var a;this.attr.visibilitySettingsLearnMorePath?a=_('You can control who sees your birthday on Twitter.<br /><a href="{{learn_more_path}}" target="_blank">Learn More</a>',{learn_more_path:this.attr.visibilitySettingsLearnMorePath}):a=_('You can control who sees your birthday on Twitter.'),this.addPopover(a)}},this.maybeRemovePopovers=function(){this.select("fieldsSelector").hasClass(this.attr.expandedClass)&&this.hideAndClearPopover()},this.setButtonTitle=function(a,b){b.has_birthdate?this.select("buttonSelector").text(b.title).removeClass(this.attr.notSetClass):this.select("buttonSelector").text(_('Birthday')).addClass(this.attr.notSetClass)},this.after("initialize",function(){this.popoverStorageKey=this.attr.userId+"_hasShownVisibilityHelpPopover",this.on(document,"uiEditProfileStart",this.initializeSelectedBirthdateData),this.on("uiVisibilitySettingSelected uiDateSelectorOptionsChanged",this.updateSelectedBirthdateData),this.on("uiBirthdateSelectHasInvalidDate",this.notifyInvalidDate),this.on(this.select("buttonSelector"),"click",this.showFields),this.on(document,"uiEditProfileEnd uiBeforePageChanged",this.resetFields),this.on("uiVisibilitySettingSelected",this.close),this.on("uiDateSelectorOptionsChanged",this.updateYearVisibility),this.on("uiBirthdateSelectSetFields",this.setBirthdateSelectFields),this.on(document,"uiBirthdateSelectGotTitle",this.setButtonTitle),this.on(document,"click",this.maybeRemovePopovers)})}var _=require("core/i18n"),defineComponent=require("core/component"),withDateSelector=require("app/ui/with_date_selector"),withDropdown=require("app/ui/with_dropdown"),withVisibilitySettings=require("app/ui/with_visibility_settings"),withPopover=require("app/ui/with_popover"),Storage=require("app/utils/storage/core"),UserInfo=require("app/data/user_info"),utils=require("core/utils");module.exports=defineComponent(birthdateSelect,withDropdown,withDateSelector,withVisibilitySettings,withPopover)
});
define("app/data/profile/birthdate_select_scribe",["module","require","exports","core/component","app/data/with_scribe","core/utils"],function(module, require, exports) {
function birthdateSelectScribe(){this.defaultAttrs({scribeContext:{component:"inline_edit",element:"birthdate_select"}}),this.scribeFieldsExpanded=function(a,b){var c=b&&b.sourceEventData,d=utils.merge(this.attr.scribeContext,{action:"expand"});this.scribe(d,c||b)},this.scribeInvalidDate=function(a,b){var c=b&&b.sourceEventData,d=utils.merge(this.attr.scribeContext,{action:"invalid"});this.scribe(d,c||b)},this.after("initialize",function(){this.on(document,"uiBirthdateSelectFieldsExpanded",this.scribeFieldsExpanded),this.on(document,"uiBirthdateSelectHasInvalidDate",this.scribeInvalidDate)})}var defineComponent=require("core/component"),withScribe=require("app/data/with_scribe"),utils=require("core/utils");module.exports=defineComponent(birthdateSelectScribe,withScribe)
});
define("app/ui/color_picker",["module","require","exports","core/component","template","core/utils","app/ui/with_dropdown"],function(module, require, exports) {
function colorPicker(){this.defaultAttrs({colorPickerColorBoxSelector:".ColorPicker-color",colorPickerColorRadioSelector:".ColorPicker-color :radio",colorPickerHexBoxSelector:".ColorPicker-hex",colorPickerHexInputSelector:".ColorPicker-hexInput",colorPickerHexRadioSelector:".ColorPicker-hex :radio",colorPickerMoreBoxSelector:".ColorPicker-more",colorPickerMoreRadioSelector:".ColorPicker-more :radio",colorPickerSelector:".ColorPicker",colorPickerTransparentContainerSelector:".ColorPicker-transparent",currentColorSelector:".js-current-color",hiddenClass:"u-hiddenVisually",iconCheckClass:"Icon--check",iconDiscoverClass:"Icon--discover",iconSelector:".Icon",radioSelector:":radio",isFocusedClass:"is-focused"});var a={9:"Tab",37:"Left Arrow",38:"Up Arrow",39:"Right Arrow",40:"Down Arrow"},b="^#([0-9a-f]{3}|[0-9a-f]{6})$";this.addFocusClass=function(b,c){a.hasOwnProperty(b.which)&&$(c.el).addClass(this.attr.isFocusedClass)},this.removeFocusClass=function(b,c){(a.hasOwnProperty(b.which)||b.type=="focusout")&&$(c.el).removeClass(this.attr.isFocusedClass)},this.removeAndAddClassesToTargetIcon=function(a,b,c){a=typeof a=="string"?a:"",b=typeof b=="string"?b:"",c.find(this.attr.iconSelector).removeClass(a).addClass(b)},this.focusColorPicker=function(){this.$colorPickerHexInput.is(":visible")?this.$colorPickerHexInput.focus():this.select("colorPickerSelector").focus()},this.changeHexBoxColor=function(a){this.$colorPickerHexBox.css("border-color",a).css("background-color",a).attr("data-color",a),this.$colorPickerHexInput.css("border-color",a)},this.changeHexInput=function(a){a.charAt(0)=="#"&&(a=a.substring(1)),this.$colorPickerHexInput.val(a)},this.isHexCode=function(a){return a.match(b)},this.currentColor=function(){return this.select("currentColorSelector").attr("data-color").toLowerCase()},this.setColor=function(a){a=a.toLowerCase();if(!this.isHexCode(a))return;this.select("currentColorSelector").attr("value",a),this.trigger("uiColorPicked",{targetSelector:"#"+this.select("togglerSelector").attr("id"),hex:a}),this.isHexVisible?this.changeHexBoxColor(a):this.changeHexInput(a)},this.showHex=function(){this.select("colorPickerMoreBoxSelector").closest(this.attr.colorPickerTransparentContainerSelector).addClass(this.attr.hiddenClass).hide(),this.$colorPickerHexBox.removeClass(this.attr.hiddenClass).css("display","inline-block"),this.$colorPickerHexInput.val("").focus()},this.hideHex=function(){this.$colorPickerHexBox.addClass(this.attr.hiddenClass).hide(),this.select("colorPickerMoreBoxSelector").closest(this.attr.colorPickerTransparentContainerSelector).removeClass(this.attr.hiddenClass).css("display","inline-block");var a=this.$colorPickerHexBox.data("original-color");this.changeHexBoxColor(a),this.removeAndAddClassesToTargetIcon(null,this.attr.iconDiscoverClass,this.$colorPickerHexBox)},this.initColorPicker=function(){this.$colorPickerHexBox.hide(),this.$colorPickerHexInput.attr("placeholder",this.currentColor().substring(1)),this.$selectedBox&&this.removeAndAddClassesToTargetIcon(this.attr.iconCheckClass,null,this.$selectedBox);var a=this.currentColor(),b="[data-color="+(a||'""')+"]",c=this.$node.find(this.attr.colorPickerColorBoxSelector+b).first();c.length==0?(this.isHexVisible=!0,this.showHex(),a?(this.changeHexBoxColor(a),this.changeHexInput(a),this.$selectedBox=this.$colorPickerHexBox,this.removeAndAddClassesToTargetIcon(this.attr.iconDiscoverClass,this.attr.iconCheckClass,this.$selectedBox)):this.$selectedBox=this.select("colorPickerMoreBoxSelector")):(this.isHexVisible=!1,this.hideHex(),this.$selectedBox=c,this.removeAndAddClassesToTargetIcon(null,this.attr.iconCheckClass,this.$selectedBox),this.$selectedBox.find(this.attr.radioSelector).attr("checked",!0))},this.selectColorBox=function(a){var b=$(a.target).closest("[data-color]").attr("data-color").toLowerCase();this.isHexVisible?(this.isHexVisible=!1,this.setColor(b),this.hideHex()):this.setColor(b),this.removeAndAddClassesToTargetIcon(this.attr.iconCheckClass,null,this.$selectedBox),this.$selectedBox=$(a.target).closest(this.attr.colorPickerColorBoxSelector),this.removeAndAddClassesToTargetIcon(null,this.attr.iconCheckClass,this.$selectedBox)},this.selectMoreBox=function(){this.isHexVisible==0&&(this.showHex(),this.isHexVisible=!0,this.$selectedBox.find(this.attr.radioSelector).attr("checked",!0))},this.selectHexInput=function(a){var b="#"+$(a.target).val();this.setColor(b),this.$selectedBox.is(this.$colorPickerHexBox)==0&&this.isHexCode("#"+this.$colorPickerHexInput.val())&&(this.removeAndAddClassesToTargetIcon(this.attr.iconCheckClass,null,this.$selectedBox),this.$selectedBox=this.$colorPickerHexBox,this.removeAndAddClassesToTargetIcon(this.attr.iconDiscoverClass,this.attr.iconCheckClass,this.$selectedBox),this.select("colorPickerHexRadioSelector").attr("checked",!0))},this.renderColorPicker=function(){var a=template["highline/components/color_picker"].render(template);this.$node.append(a),this.$colorPickerHexBox=this.select("colorPickerHexBoxSelector"),this.$colorPickerHexInput=this.select("colorPickerHexInputSelector"),this.wasRendered=!0},this.addColorPicker=function(){this.wasRendered||this.renderColorPicker(),this.initColorPicker()},this.after("closeAndRestoreFocus",function(){this.select("togglerSelector").focus()}),this.after("initialize",function(){this.wasRendered=!1,this.on("uiDropdownOpened",utils.once(this.addColorPicker)),this.on("uiDropdownOpened",this.focusColorPicker),this.on(document,"uiEditProfileStart",this.addColorPicker),this.on("change",{colorPickerColorRadioSelector:this.selectColorBox}),this.on("click",{colorPickerMoreRadioSelector:this.selectMoreBox}),this.on("input",{colorPickerHexInputSelector:this.selectHexInput}),this.on("keyup",{colorPickerColorBoxSelector:this.addFocusClass,colorPickerMoreBoxSelector:this.addFocusClass}),this.on("keydown focusout",{colorPickerColorBoxSelector:this.removeFocusClass,colorPickerMoreBoxSelector:this.removeFocusClass})}),this.before("teardown",function(){this.select("colorPickerSelector").remove()})}var defineComponent=require("core/component"),template=require("template"),utils=require("core/utils"),withDropdown=require("app/ui/with_dropdown");module.exports=defineComponent(withDropdown,colorPicker)
});
define("app/data/drag_and_drop_scribe",["module","require","exports","core/component","core/utils","app/data/with_scribe"],function(module, require, exports) {
function dragAndDropScribe(){this.after("initialize",function(){this.scribeOnEvent("uiDropped",{action:"drag_and_drop"})})}var defineComponent=require("core/component"),utils=require("core/utils"),withScribe=require("app/data/with_scribe");module.exports=defineComponent(dragAndDropScribe,withScribe)
});
define("app/ui/droppable_image",["module","require","exports","core/component","app/ui/with_drop_events","app/utils/file"],function(module, require, exports) {
function droppableImage(){this.defaultAttrs({uploadType:"",enableEvent:"uiEditProfileStart",disableEvent:"uiEditProfileEnd"}),this.triggerGotProfileImageData=function(a,b){this.trigger("uiGotProfileImageData",{name:a,contents:b,uploadType:this.attr.uploadType,wasDropped:!0})},this.getDroppedImageData=function(a,b){if(!this.editing)return;if(!b.file||b.file.type&&!b.file.type.match(/^image\//))return;a.stopImmediatePropagation();var c=b.file;file.getFileData(c.name,c).then(this.triggerGotProfileImageData.bind(this))},this.enableDrop=function(){this.editing=!0},this.disableDrop=function(){this.editing=!1},this.after("initialize",function(){this.editing=!1,this.on(document,this.attr.enableEvent,this.enableDrop),this.on(document,this.attr.disableEvent,this.disableDrop),this.on("uiDrop",this.getDroppedImageData)})}var defineComponent=require("core/component"),withDropEvents=require("app/ui/with_drop_events"),file=require("app/utils/file");module.exports=defineComponent(droppableImage,withDropEvents)
});
define("app/ui/inline_edit",["module","require","exports","core/component"],function(module, require, exports) {
function inlineEdit(){var a=1.2;this.defaultAttrs({editableFieldSelector:".editable-field",profileFieldSelector:".profile-field",globalProfileFieldSelector:null,globalProfileFieldContainerSelector:null,measuringFieldSelector:".measuring-field",padding:20,extraCharsForMeasuring:""}),this.syncDimensions=function(){if(!this.$measuringField.length)return;var a=this.getDimensions(this.currentText());if(this.isTextArea){var b=Math.ceil(a.height/this.lineHeight);this.$editableField.attr("rows",b)}else this.$editableField.width(a.width+this.padding)},this.saveOldValues=function(){this.oldTextValue=this.editableFieldValue(),this.oldHtmlValue=this.$profileField.html()},this.resetProfileField=function(){this.$profileField.html(this.oldHtmlValue)},this.resetToOldValues=function(){this.$editableField.val(this.oldTextValue).trigger("uiInputChanged"),this.resetProfileField(),this.updateProfileFieldContainerVisibility()},this.syncValue=function(){var a=this.editableFieldValue();this.oldTextValue!==a&&(this.setProfileField(),this.trigger("uiInlineEditSave",{newValue:a,field:this.$editableField.attr("name")}))},this.setProfileField=function(){var a=this.editableFieldValue();this.truncateLength&&a.length>this.truncateLength&&(a=a.substr(0,this.truncateLength)+"…"),this.$profileField.text(a),this.updateProfileFieldContainerVisibility()},this.currentText=function(){return this.editableFieldValue()||this.getPlaceholderText()},this.editableFieldValue=function(){return this.$editableField.val()},this.updateProfileFieldContainerVisibility=function(){var a=this.editableFieldValue().trim()=="";this.$profileFieldContainer.toggleClass("u-hidden",a)},this.addPadding=function(){this.padding=this.attr.padding},this.removePadding=function(){this.padding=0},this.getDimensions=function(a){return this.truncateLength&&(a=a.substr(0,this.truncateLength)),this.prevText!==a&&(this.measureDimensions(a),this.prevText=a),{width:this.width,height:this.height}},this.measureDimensions=function(a){this.$measuringField.text(a+this.attr.extraCharsForMeasuring),this.height=this.$measuringField.height(),this.width=this.$measuringField.width()},this.preventNewlineAndLeadingSpace=function(a){if(a.keyCode===13||a.keyCode===32&&!this.editableFieldValue())a.preventDefault(),a.stopImmediatePropagation()},this.getPlaceholderText=function(){return this.$editableField.attr("placeholder")},this.closeOpenDropdowns=function(){this.trigger("uiEditProfileHideOptions")},this.after("initialize",function(){this.$editableField=this.select("editableFieldSelector"),this.$profileField=this.attr.globalProfileFieldSelector?$(this.attr.globalProfileFieldSelector):this.select("profileFieldSelector"),this.$measuringField=this.select("measuringFieldSelector"),this.$profileFieldContainer=$(this.attr.globalProfileFieldContainerSelector),this.lineHeight=parseInt(this.$profileField.css("line-height"),10)||parseInt(this.$profileField.css("font-size"),10)*a,this.isTextArea=this.$editableField.is("textarea"),this.truncateLength=parseInt(this.$editableField.attr("data-truncate-length"),10),this.padding=0,this.on(document,"uiEditProfileSaveFields",this.syncValue),this.on(document,"uiEditProfileStart",this.saveOldValues),this.on(document,"uiEditProfileCancel",this.resetToOldValues),this.on(document,"uiEditProfileStart",this.syncDimensions),this.on(document,"uiShowProfileEditError",this.resetProfileField),this.on(this.$editableField,"keydown",this.preventNewlineAndLeadingSpace),this.on(this.$editableField,"focus",this.closeOpenDropdowns),this.isTextArea||(this.on(this.$editableField,"focus",this.addPadding),this.on(this.$editableField,"blur",this.removePadding)),this.on(this.$editableField,"keyup focus blur update paste",this.syncDimensions)})}var defineComponent=require("core/component");module.exports=defineComponent(inlineEdit)
});
define("app/data/inline_edit_scribe",["module","require","exports","core/component","core/utils","app/data/with_scribe"],function(module, require, exports) {
function inlineEditScribe(){this.defaultAttrs({scribeContext:{component:"inline_edit"}}),this.scribeAction=function(a){var b=utils.merge(this.attr.scribeContext,{action:a});return function(a,c){this.scribe(b,c)}},this.after("initialize",function(){this.on("uiEditProfileStart",this.scribeAction("edit")),this.on("uiEditProfileCancel",this.scribeAction("cancel")),this.on("dataInlineEditSaveSuccess",this.scribeAction("success")),this.on("dataInlineEditSaveError",this.scribeAction("error"))})}var defineComponent=require("core/component"),utils=require("core/utils"),withScribe=require("app/data/with_scribe"),InlineEditScribe=defineComponent(inlineEditScribe,withScribe);module.exports=InlineEditScribe
});
define("app/ui/profile/inline_edit_user_birthdate",["module","require","exports","core/component"],function(module, require, exports) {
function inlineEditUserBirthdate(){this.oldBirthdateData={},this.newBirthdateData={},this.saveOldBirthdateData=function(a,b){this.oldBirthdateData=b},this.setNewBirthdateData=function(a,b){this.newBirthdateData=b},this.isNewBirthdateDifferentThanOldBirthdate=function(){return Object.keys(this.newBirthdateData).some(function(a){return this.newBirthdateData[a].value!=this.oldBirthdateData[a].value},this)},this.isValidNewBirthdate=function(){var a=!1,b=!1;for(var c in this.newBirthdateData)this.newBirthdateData[c].type=="date_select"&&(this.newBirthdateData[c].value==0?a=!0:b=!0);return b&&!a||a&&!b},this.syncBirthdateData=function(){if(this.isNewBirthdateDifferentThanOldBirthdate())if(this.isValidNewBirthdate())for(var a in this.newBirthdateData)this.trigger("uiInlineEditSave",{newValue:this.newBirthdateData[a].value,field:this.newBirthdateData[a].name});else this.trigger("uiBirthdateSelectHasInvalidDate")},this.replaceOldBirthdateData=function(){this.oldBirthdateData=this.newBirthdateData},this.resetOldBirthdateData=function(){this.isNewBirthdateDifferentThanOldBirthdate()&&this.trigger("uiBirthdateSelectSetFields",this.oldBirthdateData)},this.after("initialize",function(){this.on("uiBirthdateSelectDataInitialized",this.saveOldBirthdateData),this.on("uiBirthdateSelectDataUpdated",this.setNewBirthdateData),this.on("uiBirthdateSelectGotInvalidDateMessage","uiInlineEditSaveValidationError"),this.on(document,"uiEditProfileSaveFields",this.syncBirthdateData),this.on(document,"uiEditProfileSuccess",this.replaceOldBirthdateData),this.on(document,"uiEditProfileCancel uiBeforePageChanged",this.resetOldBirthdateData)})}var defineComponent=require("core/component");module.exports=defineComponent(inlineEditUserBirthdate)
});
define("app/ui/profile/inline_edit_user_color",["module","require","exports","core/component"],function(module, require, exports) {
function inlineEditUserColor(){this.setUserColor=function(a){this.trigger("uiOverrideUserCss",{color:a}),this.$node.attr("data-color",a)},this.saveOldColor=function(){this.oldColor=this.$node.attr("data-color")},this.setNewColor=function(a,b){this.$node.is(b.targetSelector)&&this.setUserColor(b.hex)},this.syncValue=function(){var a=this.$node.attr("data-color");this.oldColor!==a&&this.trigger("uiInlineEditSave",{newValue:a,field:this.$node.attr("name")})},this.resetOldColor=function(){this.oldColor&&this.setUserColor(this.oldColor)},this.hideColorPicker=function(){this.trigger("uiHideColorPicker")},this.after("initialize",function(){this.on(document,"uiEditProfileStart uiEditProfileSuccess",this.saveOldColor),this.on(document,"uiColorPicked uiColorPreview",this.setNewColor),this.on(document,"uiEditProfileSaveFields",this.syncValue),this.on(document,"uiEditProfileCancel uiBeforePageChanged",this.resetOldColor),this.on(document,"uiEditProfileSuccess uiEditProfileCancel uiBeforePageChanged",this.hideColorPicker)})}var defineComponent=require("core/component");module.exports=defineComponent(inlineEditUserColor)
});
define("app/ui/profile/inline_edit_user_location",["module","require","exports","core/component","template"],function(module, require, exports) {
function inlineEditUserLocation(){this.defaultAttrs({editableLocationFieldSelector:".ProfileHeaderCardEditing-editableField",placeIdFieldSelector:".ProfileHeaderCardEditing-locationPlaceId",globalProfileFieldSelector:".ProfileHeaderCard-locationText",globalProfileFieldContainerSelector:".ProfileHeaderCard-location",hiddenClass:"u-hidden",templatePath:"highline/user_location"}),this.saveOldLocationValues=function(){this.oldLocationValue=this.editableLocationFieldValue(),this.oldPlaceIdValue=this.$placeIdField.val(),this.oldHtmlValue=this.$profileField.html(),this.savedLocation=!1,this.savedLocationId=!1},this.resetProfileLocationField=function(){this.$profileField.html(this.oldHtmlValue)},this.resetToOldLocationValues=function(){this.$editableLocationField.val(this.oldLocationValue),this.$placeIdField.val(this.oldPlaceIdValue),this.resetProfileLocationField(),this.updateProfileFieldContainerVisibility()},this.syncLocationValues=function(){var a=!1,b=this.editableLocationFieldValue(),c=this.$placeIdField.val();this.oldPlaceIdValue!==c&&c!==""?(a=!0,this.trigger("uiInlineEditSave",{newValue:b,field:this.$editableLocationField.attr("name")}),this.trigger("uiInlineEditSave",{newValue:c,field:this.$placeIdField.attr("name")})):this.oldLocationValue!==b&&(a=!0,this.trigger("uiInlineEditSave",{newValue:b,field:this.$editableLocationField.attr("name")})),a&&(this.setProfileLocationField(),this.trigger("uiEditProfileSaveLocation"))},this.trackSavedLocationFields=function(a,b){b.field===this.$editableLocationField.attr("name")?this.savedLocation=!0:b.field===this.$placeIdField.attr("name")&&(this.savedLocationId=!0)},this.setProfileLocationField=function(){var a=this.editableLocationFieldValue(),b=this.$placeIdField.val();a=b?a:a.substring(0,30);var c={location:a,place_id:b};this.$profileField.html(template[this.attr.templatePath].render(c,template)),this.updateProfileFieldContainerVisibility()},this.editableLocationFieldValue=function(){return this.$editableLocationField.val()},this.updateProfileFieldContainerVisibility=function(){var a=this.editableLocationFieldValue().trim()=="";this.$profileFieldContainer.toggleClass(this.attr.hiddenClass,a)},this.preventLeadingSpace=function(a){a.keyCode===32&&!this.editableLocationFieldValue()&&(a.preventDefault(),a.stopImmediatePropagation())},this.startEditLocation=function(a){var b=$(a.target);b.trigger("uiStartEditGeoLocation")},this.finishEditLocation=function(a){var b=$(a.target);b.trigger("uiFinishEditGeoLocation")},this.after("initialize",function(){this.$editableLocationField=this.select("editableLocationFieldSelector"),this.$placeIdField=this.select("placeIdFieldSelector"),this.$profileField=$(this.attr.globalProfileFieldSelector),this.$profileFieldContainer=$(this.attr.globalProfileFieldContainerSelector),this.on(document,"uiEditProfileSaveFields",this.syncLocationValues),this.on(document,"uiEditProfileStart",this.saveOldLocationValues),this.on(document,"uiEditProfileCancel",this.resetToOldLocationValues),this.on(document,"uiShowProfileEditError",this.resetProfileLocationField),this.on(document,"uiInlineEditSave",this.trackSavedLocationFields),this.on(this.$editableLocationField,"keydown",this.preventLeadingSpace),this.on(this.$editableLocationField,"focus","uiEditProfileHideOptions"),this.on(this.$editableLocationField,"focus",this.startEditLocation),this.on(this.$editableLocationField,"focusout",this.finishEditLocation)})}var defineComponent=require("core/component"),template=require("template");module.exports=defineComponent(inlineEditUserLocation)
});
define("app/utils/hide_or_show_divider",["module","require","exports"],function(module, require, exports) {
module.exports=function(b,c,d,e){var f=b.find(c),g=!!$.trim(b.find(d).text()),h=!!$.trim(b.find(e).text());g&&h?f.show():f.hide()}
});
define("app/ui/with_inline_image_options",["module","require","exports","app/utils/is_showing_avatar_options"],function(module, require, exports) {
function withInlineImageOptions(){this.defaultAttrs({editHeaderSelector:".edit-header-target",editAvatarSelector:".profile-picture",cancelOptionsSelector:".cancel-options",changePhotoSelector:"#choose-photo",changeHeaderSelector:"#choose-header",canToggleHeaderOptions:!1}),this.isShowingHeaderOptions=function(){return this.$body.hasClass("show-header-options")},this.optionsEnabled=function(){this.canShowOptions=!0},this.optionsDisabled=function(){this.canShowOptions=!1},this.toggleAvatarOptions=function(a){a.preventDefault(),this.hideHeaderOptions(),isShowingAvatarOptions()?this.hideAvatarOptions():this.showAvatarOptions()},this.showAvatarOptions=function(){this.canShowOptions&&!isShowingAvatarOptions()&&(this.$body.addClass("show-avatar-options"),this.trigger(this.select("changePhotoSelector"),"uiShouldShowDropdown"))},this.hideAvatarOptions=function(){this.$body.removeClass("show-avatar-options"),this.trigger(document,"uiForceDropdownClosed")},this.toggleHeaderOptions=function(a){a.preventDefault(),this.hideAvatarOptions(),this.isShowingHeaderOptions()?this.hideHeaderOptions():this.showHeaderOptions()},this.showHeaderOptions=function(){this.canShowOptions&&!this.$body.hasClass("show-header-options")&&(this.$body.addClass("show-header-options"),this.trigger(this.select("changeHeaderSelector"),"uiShouldShowDropdown"))},this.hideHeaderOptions=function(){this.$body.removeClass("show-header-options"),this.trigger(document,"uiForceDropdownClosed")},this.hideOptions=function(){this.hideHeaderOptions(),this.hideAvatarOptions()},this.after("initialize",function(){this.$body=$("body"),this.on("click",{editAvatarSelector:this.toggleAvatarOptions,editHeaderSelector:this.attr.canToggleHeaderOptions?this.toggleHeaderOptions:this.showHeaderOptions,cancelOptionsSelector:this.hideOptions}),this.attr.canToggleHeaderOptions||this.on("uiDropdownCloseRequested",function(a){this.isShowingHeaderOptions()&&a.preventDefault()}),this.on("uiEditProfileStart",this.optionsEnabled),this.on("uiEditProfileEnd",this.optionsDisabled),this.on("uiProfileHeaderUpdated uiProfileAvatarUpdated uiEditProfileEnd uiEditProfileHideOptions",this.hideOptions),this.on(document,"uiShortcutEsc",this.hideOptions),this.on(document,"uiShowEditAvatarOptions",this.showAvatarOptions),this.on(document,"uiShowEditHeaderOptions",this.showHeaderOptions)})}var isShowingAvatarOptions=require("app/utils/is_showing_avatar_options");module.exports=withInlineImageOptions
});
define("app/ui/with_inline_image_editing",["module","require","exports","core/compose","app/utils/hide_or_show_divider","app/ui/with_inline_image_options"],function(module, require, exports) {
function withInlineImageEditing(){compose.mixin(this,[withInlineImageOptions]),this.defaultAttrs({avatarSelector:".avatar:first",avatarContainerSelector:".profile-picture:first",avatarPlaceholderSelector:".profile-picture-placeholder",hiddenClass:"hidden",removeFromPreview:".profile-editing-dialogs, .edit-header-target, input, label, textarea, .controls, .inline-edit-icon",avatarEditingSelector:".ProfileAvatarEditing",headerImageUploadDialogSelector:"#header_image_upload_dialog",headerCropperSelector:"#header_image_upload_dialog .cropper-mask",profileHeaderEditingClass:"is-editingHeader",profileHeaderInnerSelector:".ProfileCanopy-header",profileHeaderImageContainerSelector:".ProfileCanopy-headerBg",profileHeaderImageSelector:".ProfileCanopy-headerBg img",headerEditingSelector:".ProfileHeaderEditing",hasHeaderClass:"is-withHeader",iframeSavingClass:"is-iframeSaving"}),this.editHeaderModeOn=function(){this.$body.addClass(this.attr.profileHeaderEditingClass),this.hideHeaderOptions()},this.editHeaderModeOff=function(){this.$body.removeClass(this.attr.profileHeaderEditingClass),this.removeHeaderPreview()},this.removeHeaderPreview=function(){this.$headerPreview&&this.$headerPreview.remove()},this.updateImage=function(a,b){var c=this.getBase64orImgUrl(b);this.isOfType("header",b)&&this.updateHeader(c),this.isOfType("avatar",b)&&(this.select("avatarSelector").attr("src",c),this.showAvatar())},this.getBase64orImgUrl=function(a){return a.sourceEventData&&!a.useStatusAsImgUrl?"data:image/jpeg;base64,"+a.sourceEventData.fileData:a.status},this.updateHeader=function(a){var b=this.select("profileHeaderImageSelector");b.attr("src",a),b.removeClass(this.attr.hiddenClass),this.trigger("uiProfileHeaderUpdated"),this.select("headerEditingSelector").addClass(this.attr.hasHeaderClass)},this.useDefaultHeader=function(){this.select("profileHeaderImageSelector").addClass(this.attr.hiddenClass),this.select("headerEditingSelector").removeClass(this.attr.hasHeaderClass),this.trigger("uiProfileHeaderUpdated")},this.hasHeader=function(){return this.select("headerEditingSelector").hasClass(this.attr.hasHeaderClass)},this.showAvatar=function(){this.select("avatarContainerSelector").removeClass(this.attr.hiddenClass),this.select("avatarPlaceholderSelector").addClass(this.attr.hiddenClass),this.trigger("uiProfileAvatarUpdated"),this.select("avatarEditingSelector").addClass("is-withAvatar")},this.showAvatarPlaceholder=function(){this.select("avatarContainerSelector").addClass(this.attr.hiddenClass),this.select("avatarPlaceholderSelector").removeClass(this.attr.hiddenClass),this.trigger("uiProfileAvatarUpdated"),this.select("avatarEditingSelector").removeClass("is-withAvatar")},this.showDefaultImage=function(a,b){this.isOfType("avatar",b)&&this.showAvatarPlaceholder(),this.isOfType("header",b)&&this.useDefaultHeader()},this.isOfType=function(a,b){if(!b)return;return b.sourceEventData&&b.sourceEventData.uploadType===a||b.uploadType===a},this.showLargeCanopy=function(){this.trigger("uiShowLargeCanopy")},this.showNormalCanopy=function(){this.trigger(this.hasHeader()?"uiShowLargeCanopy":"uiShowSmallCanopy")},this.showSavingHelp=function(a,b){this.isOfType("header",b)?this.select("headerEditingSelector").addClass(this.attr.iframeSavingClass):this.isOfType("avatar",b)&&this.select("avatarEditingSelector").addClass(this.attr.iframeSavingClass)},this.hideSavingHelp=function(a,b){this.isOfType("header",b)?this.select("headerEditingSelector").removeClass(this.attr.iframeSavingClass):this.isOfType("avatar",b)&&this.select("avatarEditingSelector").removeClass(this.attr.iframeSavingClass)},this.after("initialize",function(){this.$body=$("body"),this.on("uiDialogOpened",{headerImageUploadDialogSelector:this.editHeaderModeOn}),this.on("uiDialogClosed",{headerImageUploadDialogSelector:this.editHeaderModeOff}),this.on(document,"dataSaveImageSuccess",this.updateImage),this.on(document,"dataDeleteImageSuccess",this.showDefaultImage),this.on(document,"uiEditProfileStart",this.showLargeCanopy),this.on(document,"uiEditProfileEnd",this.showNormalCanopy),this.on(document,"dataLegacySaveImageStart",this.showSavingHelp),this.on(document,"dataLegacySaveImageFinish",this.hideSavingHelp)})}var compose=require("core/compose"),hideOrShowDivider=require("app/utils/hide_or_show_divider"),withInlineImageOptions=require("app/ui/with_inline_image_options");module.exports=withInlineImageEditing
});
define("app/ui/inline_profile_editing",["module","require","exports","core/i18n","app/utils/animate_window_scrolltop","core/clock","core/component","app/utils/hide_or_show_divider","app/utils/params","app/ui/tooltips","app/ui/with_inline_image_editing","app/utils/with_keyboard_modality","app/ui/with_scrollbar_width"],function(module, require, exports) {
function inlineProfileEditing(){this.defaultAttrs({cancelProfileButtonSelector:".cancel-profile-btn",saveProfileButtonSelector:".save-profile-btn",saveProfileFooterSelector:".save-profile-footer",bioProfileFieldSelector:".bio.profile-field",locationSelector:".location",urlProfileFieldSelector:".url .profile-field",dividerSelector:".location-and-url .divider",anchorSelector:"a",ignoreInTabIndex:".js-tooltip",tooltipSelector:".js-tooltip",updateSaveMessage:_('Your profile has been saved.'),scrollResetDuration:300,profileSavingClass:"profile-saving",profileEditingClass:"profile-editing",updateErrorMessage:_('There was an error updating your profile.'),useProfileErrorDialog:!0,firstActiveControlSelector:".ProfileCanopy",lastActiveControlSelector:".ProfilePage-editingButtons",firstEditableFieldSelector:".ProfileHeaderCardEditing",birthdateFieldSelector:".ProfileHeaderCard-birthdateText",birthdateContainerSelector:".ProfileHeaderCard-birthdate"}),this.saveProfile=function(a,b){a.preventDefault(),this.trigger("uiEditProfileSaveFields"),this.trigger("uiEditProfileSave")},this.cancelProfileEditing=function(a,b){a.preventDefault();var c=$(a.target).attr("data-scribe-element");this.trigger("uiEditProfileCancel",{scribeContext:{element:c}}),this.trigger("uiEditProfileEnd")},this.isEditing=function(){return this.$body.hasClass(this.attr.profileEditingClass)},this.editModeOn=function(){animateWinScrollTop(0,this.attr.scrollResetDuration,function(){this.trigger(document,"uiProfileEditingOn")}.bind(this)),this.calculateScrollbarWidth(),this.$body.addClass(this.attr.profileEditingClass)},this.editModeOff=function(){this.$body.removeClass(this.attr.profileEditingClass),this.trigger(document,"uiProfileEditingOff")},this.fieldEditingModeOn=function(){this.$body.addClass("profile-field-editing"),this.select("dividerSelector").show()},this.fieldEditingModeOff=function(){this.$body.removeClass("profile-field-editing"),hideOrShowDivider(this.$node,this.attr.dividerSelector,this.attr.locationSelector,this.attr.urlProfileFieldSelector)},this.catchAnchorClicks=function(a){var b=$(a.target).attr("target")=="_blank";this.isEditing()&&!b&&a.preventDefault()},this.focusFirstActiveControl=function(a){this.focusNextAvailableControl("first",this.select("firstActiveControlSelector")),a.preventDefault()},this.focusLastActiveControl=function(a){this.focusNextAvailableControl("last",this.select("lastActiveControlSelector")),a.preventDefault()},this.disabledTabbing=function(){this.select("ignoreInTabIndex").attr("tabindex","-1"),this.createFirstLastTabStop(this.$node,1,4),this.focusNextAvailableControl("first",this.select("firstEditableFieldSelector")),this.on(this.$node.find(this.attr.lastTabStopSelector),"focus",this.focusFirstActiveControl),this.on(this.$node.find(this.attr.firstTabStopSelector),"focus",this.focusLastActiveControl)},this.enableTabbing=function(){this.select("ignoreInTabIndex").removeAttr("tabindex"),this.removeFirstLastTabStop(this.$node),this.off(this.$node.find(this.attr.lastTabStopSelector),"focus",this.focusFirstActiveControl),this.off(this.$node.find(this.attr.firstTabStopSelector),"focus",this.focusLastActiveControl)},this.saving=function(){this.$body.addClass(this.attr.profileSavingClass)},this.handleError=function(a,b){this.doneSaving(),this.fieldEditingModeOn();var c={message:b.message||this.attr.updateErrorMessage};this.trigger("uiShowProfileEditError",c),this.attr.useProfileErrorDialog||this.trigger("uiShowError",c)},this.savingError=function(a,b){clock.setTimeoutEvent("uiHandleSaveError",1e3,{message:b.message})},this.saveSuccess=function(a,b){this.doneSaving(),this.trigger("uiShowMessage",{message:this.attr.updateSaveMessage}),this.trigger("uiEditProfileSuccess")},this.doneSaving=function(){this.$body.removeClass(this.attr.profileSavingClass)},this.disableTooltips=function(){this.select("tooltipSelector").tooltip("disable").tooltip("hide")},this.enableTooltips=function(){this.select("tooltipSelector").tooltip("enable")},this.finishedProcessing=function(a,b){b&&(b.linkified_description&&this.select("bioProfileFieldSelector").html(b.linkified_description),b.user_url&&this.select("urlProfileFieldSelector").html(b.user_url),b.has_birthdate&&b.birthdate&&(this.select("birthdateFieldSelector").html(b.birthdate),b.autoplay_balloon_animation&&this.trigger("uiBalloonAnimationRequested",{autoplay:!0})),typeof b.has_birthdate!="undefined"&&(this.select("birthdateContainerSelector").toggleClass(this.attr.hiddenClass,!b.has_birthdate),this.trigger("uiBirthdateSelectGotTitle",{title:b.formatted_birthdate,has_birthdate:b.has_birthdate}))),this.trigger("uiEditProfileEnd")},this.after("initialize",function(){this.$body=$("body"),this.on("click",{cancelProfileButtonSelector:this.cancelProfileEditing,saveProfileButtonSelector:this.saveProfile,anchorSelector:this.catchAnchorClicks}),this.on("uiEditProfileStart",this.editModeOn),this.on("uiEditProfileEnd",this.editModeOff),this.on("uiEditProfileStart",this.disableTooltips),this.on("uiEditProfileEnd",this.enableTooltips),this.on("uiEditProfileStart",this.fieldEditingModeOn),this.on("uiEditProfileSave",this.fieldEditingModeOff),this.on("uiEditProfileEnd",this.fieldEditingModeOff),this.on("uiEditProfileStart",this.disabledTabbing),this.on("uiEditProfileEnd",this.enableTabbing),this.on(document,"dataInlineEditSaveStarted",this.saving),this.on(document,"dataInlineEditSaveSuccess",this.saveSuccess),this.on(document,"dataInlineEditSaveError",this.savingError),this.on(document,"uiHandleSaveError",this.handleError),this.on(document,"dataInlineEditSaveSuccess",this.finishedProcessing)})}var _=require("core/i18n"),animateWinScrollTop=require("app/utils/animate_window_scrolltop"),clock=require("core/clock"),defineComponent=require("core/component"),hideOrShowDivider=require("app/utils/hide_or_show_divider"),params=require("app/utils/params"),Tooltips=require("app/ui/tooltips"),withInlineImageEditing=require("app/ui/with_inline_image_editing"),withKeyboardModality=require("app/utils/with_keyboard_modality"),withScrollbarWidth=require("app/ui/with_scrollbar_width");module.exports=defineComponent(inlineProfileEditing,withScrollbarWidth,withInlineImageEditing,withKeyboardModality)
});
define("app/ui/inline_profile_editing_initializor",["module","require","exports","core/i18n","core/component","app/utils/image","app/data/user_info"],function(module, require, exports) {
function inlineProfileEditingInitializor(){this.defaultAttrs({profileEditingCSSBundle:"",testForCssSelector:null,retryDelay:100,retryMax:20}),this.initializeInlineProfileEditing=function(a,b){using("css!"+this.attr.profileEditingCSSBundle,this.testForCssLoaded.bind(this,b.scribeElement))},this.editHeader=function(a,b){$(document).one("uiEditProfileStart",this.showHeaderOptions.bind(this)),this.trigger("uiEditProfileInitialize",{scribeElement:b.scribeElement})},this.showHeaderOptions=function(){this.trigger("uiShowEditHeaderOptions")},this.testForCssLoaded=function(a){!this.attr.testForCssSelector||$(this.attr.testForCssSelector).length?this.triggerStart(a):this.retryCount<this.attr.retryMax?(this.retryCount++,setTimeout(this.testForCssLoaded.bind(this,a),this.attr.retryDelay)):this.trigger(document,"uiShowError",{message:_('Sorry, you aren\'t able to edit your profile at this time. Please try again later.')})},this.triggerStart=function(a){this.trigger("uiEditProfileStart",{scribeContext:{element:a}})},this.after("initialize",function(){this.retryCount=0,this.on(document,"uiEditProfileInitialize",this.initializeInlineProfileEditing),this.on(document,"uiEditProfileInitializeAndFocusOnHeaderOptions",this.editHeader)})}var _=require("core/i18n"),defineComponent=require("core/component"),image=require("app/utils/image"),userInfo=require("app/data/user_info");module.exports=defineComponent(inlineProfileEditingInitializor)
});
define("app/ui/profile/legacy_profile_images_uploader",["module","require","exports","core/i18n","core/component","app/ui/with_verify_upload_type"],function(module, require, exports) {
function legacyProfileImagesUploader(){this.defaultAttrs({uploadType:"",scribeElement:"upload"}),this.haveImageSelected=function(a,b){b.scribeElement=this.attr.scribeElement,this.trigger("uiImageSave",b),this.trigger("uiCloseDropdowns"),this.trigger("uiEditProfileHideOptions"),this.trigger(document,"dataLegacySaveImageStart",{uploadType:this.attr.uploadType})},this.uploadSuccess=function(a,b){var c={avatar:_('profile photo'),header:_('header'),background:_('background')},d=c[this.attr.uploadType]||this.attr.uploadType;this.trigger("uiAlertBanner",{message:_('Your {{uploadType}} was published successfully.',{uploadType:d})}),this.trigger("uiProfileImagePublished",{scribeElement:this.attr.scribeElement}),this.trigger(document,"dataLegacySaveImageFinish",{uploadType:this.attr.uploadType})},this.uploadFailed=function(a,b){this.trigger("uiProfileImageDialogFailure",{scribeElement:this.attr.scribeElement}),this.trigger(document,"dataLegacySaveImageFinish",{uploadType:this.attr.uploadType}),this.trigger("uiAlertBanner",{message:b.message})},this.after("initialize",function(){this.on(document,"uiImagePickerFileReady",this.verifyUploadType(this.haveImageSelected)),this.on(document,"dataSaveImageSuccess",this.verifyUploadType(this.uploadSuccess)),this.on(document,"dataSaveImageFailure",this.verifyUploadType(this.uploadFailed))})}var _=require("core/i18n"),defineComponent=require("core/component"),withVerifyUploadType=require("app/ui/with_verify_upload_type");module.exports=defineComponent(legacyProfileImagesUploader,withVerifyUploadType)
});
define("app/utils/blend_hex_color",["module","require","exports"],function(module, require, exports) {
function hexColorToIntArray(a){if(!a)return null;var b=a.replace(THREE_GROUPS_OF_ONE_CHAR_REGEX,"$1$1$2$2$3$3");return b.match(SIX_HEX_DIGITS_REGEX)?b.match(GLOBAL_MATCH_TWO_CHARS_REGEX).map(function(a){return parseInt(a,16)}):null}function blendHexColor(a,b,c){var d=hexColorToIntArray(a),e=hexColorToIntArray(c),f=1-b;return d&&e&&d.map(function(a,c){var d=Math.floor(a*b+e[c]*f);return(d+256).toString(16).slice(1)}).join("")}var THREE_GROUPS_OF_ONE_CHAR_REGEX=/^(.)(.)(.)$/,SIX_HEX_DIGITS_REGEX=/^[0-9a-f]{6}$/i,GLOBAL_MATCH_TWO_CHARS_REGEX=/.{2}/g;module.exports=blendHexColor
});
define("app/ui/profile/override_user_css",["module","require","exports","core/component","template","app/utils/blend_hex_color"],function(module, require, exports) {
function overrideUserCss(){this.defaultAttrs({overrideUserCssSelector:"#user-style-me"}),this.override=function(a,b){var c=b.color.replace(LEADING_HASH_REGEX,""),d={style_namespace:"me",user_color_lightest:blendHexColor(c,.1,"fff"),user_color_lighter:blendHexColor(c,.25,"fff"),user_color_light:blendHexColor(c,.4,"fff"),user_color:c,user_color_dark:blendHexColor(c,.8,"000"),user_color_darker:blendHexColor(c,.6,"000"),profile_link_color:c,profile_pretty_link_color:blendHexColor(c,.4,"fff")},e=template.user_css_color.render(d);this.select("overrideUserCssSelector").remove(),$("head").append(e)},this.after("initialize",function(){this.on("uiOverrideUserCss",this.override)})}var defineComponent=require("core/component"),template=require("template"),blendHexColor=require("app/utils/blend_hex_color"),LEADING_HASH_REGEX=/^#/;module.exports=defineComponent(overrideUserCss)
});
define("app/ui/dialogs/profile_confirm_image_delete_dialog",["module","require","exports","core/component","app/ui/with_dialog","app/ui/with_verify_upload_type"],function(module, require, exports) {
function profileConfirmImageDeleteDialog(){this.defaultAttrs({removeSelector:".ok-btn",cancelSelector:".cancel-btn",uploadType:""}),this.removeImage=function(){this.disableButtons(),this.trigger("uiDeleteImage",{uploadType:this.attr.uploadType})},this.triggerHideDeleteLink=function(){this.trigger("uiHideDeleteLink",{uploadType:this.attr.uploadType})},this.disableButtons=function(){this.select("removeSelector").attr("disabled",!0),this.select("cancelSelector").stop(!0,!0).fadeOut()},this.enableButtons=function(){this.select("removeSelector").removeAttr("disabled"),this.select("cancelSelector").stop(!0,!0).show()},this.after("initialize",function(){this.on(document,"uiConfirmDeleteImage",this.verifyUploadType(this.open)),this.on(document,"dataDeleteImageSuccess",this.verifyUploadType(this.close)),this.on(document,"dataDeleteImageSuccess",this.verifyUploadType(this.triggerHideDeleteLink)),this.on(document,"dataDeleteImageFailure",this.verifyUploadType(this.enableButtons)),this.on("uiDialogClosed",this.enableButtons),this.on("click",{cancelSelector:this.close,removeSelector:this.removeImage})})}var defineComponent=require("core/component"),withDialog=require("app/ui/with_dialog"),withVerifyUploadType=require("app/ui/with_verify_upload_type");module.exports=defineComponent(profileConfirmImageDeleteDialog,withDialog,withVerifyUploadType)
});
define("app/ui/profile_edit_param",["module","require","exports","core/component","app/utils/params"],function(module, require, exports) {
function profileEditParam(){this.defaultAttrs({editHeaderParam:"edit_header",editParam:"edit"}),this.hasParam=function(a){return!!params.fromQuery(window.location)[a]},this.hasEditParam=function(){return this.hasParam(this.attr.editParam)},this.hasEditHeaderParam=function(){return this.hasParam(this.attr.editHeaderParam)},this.checkEditParam=function(){this.hasEditParam()?this.trigger("uiEditProfileInitialize",{scribeElement:"edit_param"}):this.hasEditHeaderParam()&&this.trigger("uiEditProfileInitializeAndFocusOnHeaderOptions",{scribeElement:"edit_header_param"})},this.after("initialize",function(){this.on(document,"uiSwiftLoaded uiPageChanged",this.checkEditParam)})}var defineComponent=require("core/component"),params=require("app/utils/params");module.exports=defineComponent(profileEditParam)
});
define("app/ui/profile/profile_geo_picker",["module","require","exports","core/component","core/i18n","app/ui/with_geo_search_dropdown","core/utils"],function(module, require, exports) {
function profileGeoPicker(){this.defaultAttrs({placeIdSelector:".GeoSearch-placeId",searchStatusSelector:".GeoSearch-searchStatus",searchResultsContainerSelector:".GeoSearch-resultsContainer"}),this.setDefaultProfileLocations=function(a,b){this.defaultProfileLocationsHtml=b.html||""},this.hasDefaultLocations=function(){return!!this.defaultProfileLocationsHtml},this.showDefaultLocations=function(){this.select("searchStatusSelector").hide(),this.select("searchResultsContainerSelector").html(this.defaultProfileLocationsHtml),this.applyAriaAttrsToResultsAndAnnounceNumResults()},this.prepareInitialDropdown=function(){var a=this.getQuery();this.lastQuery=a,a.trim()?this.selectedNewLocation||(this.openDropdown(),this.doSearch(a)):this.setDefaultDropdown(),this.selectedNewLocation=!1},this.setDefaultDropdown=function(){this.hasDefaultLocations()?(this.isTypeaheadSearch=!1,this.clearDropdownResults(),this.showDefaultLocations(),this.openDropdown()):this.dropdownIsOpen&&this.hideDropdownAndRestoreFocus()},this.after("openDropdown",function(){this.isEditingProfileLocation||(this.isEditingProfileLocation=!0,this.trigger("uiLocationPickerOpened"))}),this.after("hideDropdown",function(){this.clearDropdownResults()}),this.finishSaveLocation=function(){var a=this.getQuery();this.hasStructuredLocation()||this.trigger("uiLocationPickerInput",{context:"typeahead",referring_event:a})},this.clearDropdownResults=function(){this.select("searchResultsContainerSelector").empty()},this.clearPlaceId=function(){this.select("placeIdSelector").val("")},this.hasStructuredLocation=function(){return this.select("placeIdSelector").val()!==""},this.changeLocation=function(a,b){var c=this.getQuery(),d=b.placeId;b.placeName&&this.select("querySelector").val(b.placeName),d&&this.select("placeIdSelector").val(b.placeId),this.isEditingProfileLocation=!1,this.selectedNewLocation=!0,this.hideDropdownAndRestoreFocus(),this.isTypeaheadSearch?this.trigger("uiLocationPickerSelect",{context:"typeahead",referring_event:c,message:d}):this.trigger("uiLocationPickerSelect",{context:"default",referring_event:c,message:d})},this.searchAutocomplete=function(){setTimeout(function(){this.searchIfQueryChanged()}.bind(this),0)},this.searchIfQueryChanged=function(){var a=this.getQuery();if(this.lastQuery===a)return;this.lastQuery=a,this.clearPlaceId(),a===""?this.setDefaultDropdown():this.doSearch(a)},this.doSearch=function(a){this.isTypeaheadSearch=!0,this.select("searchStatusSelector").text(_('Searching places...')).show(),this.trigger("uiGeoProfileSearch",{query:a})},this.searchResults=function(a,b){var c=b.sourceEventData;if(!c||c.query!==this.select("querySelector").val())return;b.status==="unavailable"?this.hideDropdown():(this.clearDropdownResults(),b.html?(this.openDropdown(),this.select("searchStatusSelector").hide(),this.select("searchResultsContainerSelector").html(b.html),this.applyAriaAttrsToResultsAndAnnounceNumResults()):this.hideDropdown())},this.after("initialize",function(){this.isEditingProfileLocation=!1,this.isTypeaheadSearch=!1,this.on(document,"uiSwiftLoaded uiPageChanged",this.applyAriaAttrsToDropdown),this.on(document,"uiEditProfileStart","uiRequestDefaultProfileLocations"),this.on(document,"uiEditProfileSaveLocation",this.finishSaveLocation),this.on(document,"dataDefaultProfileLocations",this.setDefaultProfileLocations),this.on(document,"dataProfileGeoSearchResults",this.searchResults),this.on(document,"dataProfileGeoSearchResultsUnavailable",this.hideDropdown),this.on("uiStartEditGeoLocation",{querySelector:this.prepareInitialDropdown}),this.on(this.select("querySelector"),"uiFinishEditGeoLocation",function(){this.isEditingProfileLocation=!1}),this.on("uiGeoSearchEnter",this.hideDropdown),this.on("uiGeoSearchTab",this.hideDropdown),this.on("uiGeoSearchChangeLocation",this.changeLocation),this.on("uiGeoSearchAutocomplete",this.searchAutocomplete)})}var defineComponent=require("core/component"),_=require("core/i18n"),withGeoSearchDropdown=require("app/ui/with_geo_search_dropdown"),utils=require("core/utils");module.exports=defineComponent(withGeoSearchDropdown,profileGeoPicker)
});
define("app/data/profile/profile_geo_picker_scribe",["module","require","exports","core/component","core/utils","app/data/with_scribe"],function(module, require, exports) {
function profileGeoPickerScribe(){this.defaultAttrs({scribeContext:{component:"structured_location",element:"location_picker"}}),this.scribeAction=function(a){var b=utils.merge(this.attr.scribeContext,{action:a});return function(a,c){this.scribe(b,c)}},this.after("initialize",function(){this.on("uiLocationPickerOpened",this.scribeAction("open")),this.on("uiLocationPickerInput",this.scribeAction("input")),this.on("uiLocationPickerSelect",this.scribeAction("select"))})}var defineComponent=require("core/component"),utils=require("core/utils"),withScribe=require("app/data/with_scribe");module.exports=defineComponent(profileGeoPickerScribe,withScribe)
});
define("app/ui/profile/profile_header_image_cropper_sync",["module","require","exports","core/component"],function(module, require, exports) {
function profileHeaderImageCropperSync(){this.defaultAttrs({dialogSelector:"#header_image_upload_dialog",headerSelector:".ProfileCanopy-header",aspectRatio:3}),this.setCropMetrics=function(){var a=this.select("headerSelector"),b=a.width(),c=a.height(),d=b/this.attr.aspectRatio;this.select("dialogSelector").trigger("uiSetCropMetrics",{zoneWidth:b,zoneHeight:c,width:b,height:d,top:(c-d)/2,left:0})},this.after("initialize",function(){this.on(document,"uiDialogOpened",this.setCropMetrics),this.on(window,"resize",this.setCropMetrics)})}var defineComponent=require("core/component");module.exports=defineComponent(profileHeaderImageCropperSync)
});
define("app/boot/highline_inline_edit",["module","require","exports","core/i18n","app/ui/profile/add_header_callout","app/ui/alert_banner_to_message_drawer","app/data/async_profile","app/ui/compose/bio_composer","app/ui/profile/birthdate_select","app/data/profile/birthdate_select_scribe","app/ui/settings/change_photo","app/ui/color_picker","app/data/drag_and_drop_scribe","app/ui/droppable_image","app/utils/image","app/ui/image_uploader","app/ui/inline_edit","app/data/inline_edit_scribe","app/ui/profile/inline_edit_user_birthdate","app/ui/profile/inline_edit_user_color","app/ui/profile/inline_edit_user_location","app/ui/inline_profile_editing","app/ui/inline_profile_editing_initializor","app/ui/profile/legacy_profile_images_uploader","app/ui/profile/override_user_css","app/ui/dialogs/profile_confirm_image_delete_dialog","app/ui/profile_edit_param","app/ui/profile/profile_geo_picker","app/data/profile/profile_geo_picker_scribe","app/ui/profile/profile_header_image_cropper_sync","app/ui/dialogs/profile_image_upload_dialog","app/data/settings/profile_image_upload_scribe","app/data/settings","app/data/user_info"],function(module, require, exports) {
var _=require("core/i18n"),AddHeaderCallout=require("app/ui/profile/add_header_callout"),AlertBannerToMessageDrawer=require("app/ui/alert_banner_to_message_drawer"),AsyncProfileData=require("app/data/async_profile"),BioComposer=require("app/ui/compose/bio_composer"),BirthdateSelect=require("app/ui/profile/birthdate_select"),BirthdateSelectScribe=require("app/data/profile/birthdate_select_scribe"),ChangePhoto=require("app/ui/settings/change_photo"),ColorPicker=require("app/ui/color_picker"),DragAndDropScribe=require("app/data/drag_and_drop_scribe"),DroppableImage=require("app/ui/droppable_image"),image=require("app/utils/image"),ImageUploader=require("app/ui/image_uploader"),InlineEdit=require("app/ui/inline_edit"),InlineEditScribe=require("app/data/inline_edit_scribe"),InlineEditUserBirthdate=require("app/ui/profile/inline_edit_user_birthdate"),InlineEditUserColor=require("app/ui/profile/inline_edit_user_color"),InlineEditUserLocation=require("app/ui/profile/inline_edit_user_location"),InlineProfileEditing=require("app/ui/inline_profile_editing"),InlineProfileEditingInitializor=require("app/ui/inline_profile_editing_initializor"),LegacyProfileImagesUploader=require("app/ui/profile/legacy_profile_images_uploader"),OverrideUserCss=require("app/ui/profile/override_user_css"),ProfileConfirmImageDeleteDialog=require("app/ui/dialogs/profile_confirm_image_delete_dialog"),ProfileEditParam=require("app/ui/profile_edit_param"),ProfileGeoPicker=require("app/ui/profile/profile_geo_picker"),ProfileGeoPickerScribe=require("app/data/profile/profile_geo_picker_scribe"),ProfileHeaderImageCropperSync=require("app/ui/profile/profile_header_image_cropper_sync"),ProfileImageUploadDialog=require("app/ui/dialogs/profile_image_upload_dialog"),ProfileImageUploadScribe=require("app/data/settings/profile_image_upload_scribe"),SettingsData=require("app/data/settings"),userInfo=require("app/data/user_info");module.exports=function(b){InlineProfileEditingInitializor.attachTo(".ProfilePage",{testForCssSelector:".ProfilePage-testForEditingCss:visible"},b),AddHeaderCallout.attachTo(".ProfileCanopy-addHeaderCallout"),AlertBannerToMessageDrawer.attachTo(document),AsyncProfileData.attachTo(document,b),SettingsData.attachTo(document,b,{uploadTimeout:3e4}),InlineProfileEditing.attachTo(".ProfilePage",b,{saveProfileFooterSelector:".ProfilePage-editingButtons",saveProfileButtonSelector:".ProfilePage-saveButton",cancelProfileButtonSelector:".ProfilePage-cancelButton",profileSavingClass:"is-saving",profileEditingClass:"is-editing",useProfileErrorDialog:!1,bioProfileFieldSelector:".ProfileHeaderCard-bio",urlProfileFieldSelector:".ProfileHeaderCard-urlText",avatarSelector:".ProfileAvatar-image,.ProfileAvatarEditing-image",avatarContainerSelector:".ProfileAvatar-container,.ProfileAvatarEditing-container",avatarPlaceholderSelector:".ProfileAvatar-placeholder,.ProfileAvatarEditing-placeholder",hiddenClass:"u-hidden",editAvatarSelector:".ProfileAvatarEditing-button",editHeaderSelector:".ProfileHeaderEditing-button",canToggleHeaderOptions:!0});var c={editableFieldSelector:".ProfileHeaderCardEditing-editableField",measuringFieldSelector:".ProfileHeaderCardEditing-measuringField"};InlineEdit.attachTo(".ProfileHeaderCardEditing-name",{globalProfileFieldSelector:".ProfileHeaderCard-nameLink, .ProfileCardMini .ProfileNameTruncated-link"},c),InlineEdit.attachTo(".ProfileHeaderCardEditing-bio",{globalProfileFieldSelector:".ProfileHeaderCard-bio",extraCharsForMeasuring:"WWW"},c),BioComposer.attachTo(".ProfileHeaderCardEditing-bioRich",{globalProfileFieldSelector:".ProfileHeaderCard-bio",textSelector:".rich-editor",maxLength:160}),userInfo.getDecider("geoStructuredLocationEnabled")?(InlineEditUserLocation.attachTo(".ProfileHeaderCardEditing-location"),ProfileGeoPicker.attachTo(".ProfileHeaderCardEditing-location")):InlineEdit.attachTo(".ProfileHeaderCardEditing-location",{globalProfileFieldSelector:".ProfileHeaderCard-locationText",globalProfileFieldContainerSelector:".ProfileHeaderCard-location"},c),InlineEdit.attachTo(".ProfileHeaderCardEditing-url",{globalProfileFieldSelector:".ProfileHeaderCard-urlText",globalProfileFieldContainerSelector:".ProfileHeaderCard-url"},c),InlineEditUserColor.attachTo(".ProfileHeaderCardEditing-userColorButton"),ColorPicker.attachTo(".ProfileHeaderCardEditing-userColor"),OverrideUserCss.attachTo(document),InlineEditScribe.attachTo(document),ProfileImageUploadScribe.attachTo("#profile_image_upload_dialog"),ProfileImageUploadScribe.attachTo("#header_image_upload_dialog"),DragAndDropScribe.attachTo(document),ProfileGeoPickerScribe.attachTo(document);var d={scribeContext:{page:b.pageName,section:b.sectionName,component:"profile_image_upload"}};ProfileConfirmImageDeleteDialog.attachTo("#avatar_confirm_remove_dialog",{uploadType:"avatar"}),ImageUploader.attachTo(".avatar-settings .uploader-image .photo-selector",{maxSizeInBytes:10485760,fileTooBigMessage:_('Please select a profile image that is less than 10 MB.'),uploadType:"avatar",eventData:d,formAuthenticityToken:b.formAuthenticityToken}),image.supportsCropper()?ProfileImageUploadDialog.attachTo("#profile_image_upload_dialog",{uploadType:"avatar",eventData:d,maximumWidth:b.maxAvatarUploadDimension,maximumHeight:b.maxAvatarUploadDimension,isAvatarWhenShowingAvatarOptions:!1,maxImageSize:716800}):LegacyProfileImagesUploader.attachTo("#profile_image_upload_dialog",{uploadType:"avatar"}),ChangePhoto.attachTo("#choose-photo",{supportsAutoOpen:!1,uploadType:"avatar",alwaysOpen:!0,confirmDelete:!0,eventData:d,useHtml5Editor:userInfo.getDecider("useHtml5Webcam")}),DroppableImage.attachTo(".ProfileAvatarEditing-button",{uploadType:"avatar",eventData:d});var e={scribeContext:{page:b.pageName,section:b.sectionName,component:"header_image_upload"}};ProfileConfirmImageDeleteDialog.attachTo("#header_confirm_remove_dialog",{uploadType:"header"}),ImageUploader.attachTo(".header-settings .uploader-image .photo-selector",{fileNameString:"user[profile_header_image_name]",fileDataString:"user[profile_header_image]",fileInputString:"user[profile_header_image]",uploadType:"header",maxSizeInBytes:1024e4,fileTooBigMessage:_('Please select an image that is less than 10MB.'),onError:function(){window.scrollTo(0,0)},eventData:e,formAuthenticityToken:b.formAuthenticityToken}),image.supportsCropper()?(ProfileImageUploadDialog.attachTo("#header_image_upload_dialog",{uploadType:"header",maskPadding:0,top:0,left:0,maximumWidth:1500,maximumHeight:500,imageNameSelector:"#choose-header div.photo-selector input.file-name",imageDataSelector:"#choose-header div.photo-selector input.file-data",eventData:e,modalEnabledClass:"",savingClass:"is-saving",isAvatarWhenShowingAvatarOptions:!1,cropMaskSelector:".ProfileHeaderUploadDialog-cropMask",cropZoneSelector:".ProfileHeaderUploadDialog-cropZone",cropImageSelector:".ProfileHeaderUploadDialog-cropImage",cropOverlaySelector:".ProfileHeaderUploadDialog-cropOverlay"}),ProfileHeaderImageCropperSync.attachTo(".ProfileCanopy")):LegacyProfileImagesUploader.attachTo("#header_image_upload_dialog",{uploadType:"header"}),ChangePhoto.attachTo("#choose-header",{defaultToFileInputOpen:!0,uploadType:"header",chooseExistingSelector:"#header-choose-existing",chooseWebcamSelector:"#header-choose-webcam",deleteImageSelector:"#header-delete-image",alwaysOpen:!0,confirmDelete:!0,eventData:e,useHtml5Editor:userInfo.getDecider("useHtml5Webcam")}),DroppableImage.attachTo(".ProfileHeaderEditing-button",{uploadType:"header",eventData:e}),b.DOBCollectionEnabled&&(BirthdateSelect.attachTo(".BirthdateSelect",{maximumDateAvailable:b.maximumBirthdate,shouldShowVisibilityPopover:b.shouldShowVisibilityPopover,visibilitySettingsLearnMorePath:b.visibilitySettingsLearnMorePath,userId:b.userId}),InlineEditUserBirthdate.attachTo(".BirthdateSelect"),BirthdateSelectScribe.attachTo(document)),ProfileEditParam.attachTo(".ProfilePage")}
});
define("app/data/related_users/related_users",["module","require","exports","core/component","core/utils","app/utils/storage/custom","app/data/with_data"],function(module, require, exports) {
function relatedUsersData(){this.defaultAttrs({endpoint:"/i/related_users/",profileId:null,responseField:"related_users_html",maxExcludedIds:100,storageTTL:864e5}),this.processResponse=function(a){this.trigger("dataRelatedUsersRefreshed",a);if(!a[this.attr.responseField]){if(this.emptyResponse){this.emptyResponse=!1;return}this.emptyResponse=!0,this.storage.removeItem(this.storageName),this.trigger("uiRefreshRelatedUsers")}else this.emptyResponse=!1},this.requestUsers=function(a,b){b=b||{};var c=this.getExcludedUsers(b.excludedIds||[]),d={};c.length>0&&(d.excluded=c),this.get({url:this.attr.endpoint+this.attr.profileId,eventData:b,data:d,success:this.processResponse.bind(this)})},this.getExcludedUsers=function(a){return a.length&&this.storage.pushAll(this.storageName,a),this.storage.getArray(this.storageName).join(",")},this.after("initialize",function(){if(!this.attr.profileId)return;this.emptyResponse=!1,this.storageName="excluded_"+this.attr.profileId;var a=customStorage({withArray:!0,withMaxElements:!0,withUniqueElements:!0,withExpiry:!0});this.storage=new a("excluded_related_users"),this.storage.setMaxElements(this.storageName,this.attr.maxExcludedIds),this.on(document,"uiRefreshRelatedUsers",this.requestUsers)})}var defineComponent=require("core/component"),utils=require("core/utils"),customStorage=require("app/utils/storage/custom"),withData=require("app/data/with_data");module.exports=defineComponent(relatedUsersData,withData)
});
define("app/data/related_users/related_users_scribe",["module","require","exports","core/component","app/data/with_scribe"],function(module, require, exports) {
function relatedUsersScribe(){this.scribeResults=function(a,b){b=b||[],b.isInitial&&this.scribe("impression",b);var c=(b.userIds||[]).map(function(a,b){return{id:a,item_type:"user",position:b}}),d={items:c},e=c.length?"results":"no_results";this.scribe(e,b,d)},this.scribeRefresh=function(a,b){this.scribe({element:"refresh_link",action:"click"},b)},this.after("initialize",function(){this.on("uiRelatedUsersDisplayed",this.scribeResults),this.on("uiRelatedUsersRefreshClick",this.scribeRefresh)})}var defineComponent=require("core/component"),withScribe=require("app/data/with_scribe");module.exports=defineComponent(relatedUsersScribe,withScribe)
});
define("app/ui/related_users/related_users",["module","require","exports","core/component","app/ui/with_user_actions","app/ui/with_item_actions"],function(module, require, exports) {
function relatedUsers(){this.defaultAttrs({usersSelector:".RelatedUsers-users",refreshSelector:".js-refresh-related-users",relatedUserSelector:".js-actionable-user",responseField:"related_users_html",hiddenClass:"u-hidden",itemType:"user"}),this.renderRelatedUsers=function(a,b){this.refreshing=!1;var c=this.$node.hasClass(this.attr.hiddenClass),d=b[this.attr.responseField];d&&(this.select("usersSelector").html(d),this.show()),this.trigger("uiRelatedUsersDisplayed",{userIds:this.collectVisibleUserIds(),isInitial:c})},this.collectVisibleUserIds=function(){var a=this.select("relatedUserSelector").map(function(){return $(this).attr("data-user-id")});return $.makeArray(a)},this.show=function(){this.$node.removeClass(this.attr.hiddenClass)},this.clickOnRefresh=function(a,b){if(this.refreshing)return;this.trigger("uiRelatedUsersRefreshClick"),this.refreshing=!0,this.trigger("uiRefreshRelatedUsers",{excludedIds:this.collectVisibleUserIds()})},this.after("initialize",function(){this.refreshing=!1,this.on(document,"dataRelatedUsersRefreshed",this.renderRelatedUsers),this.trigger("uiRefreshRelatedUsers"),this.on("click",{refreshSelector:this.clickOnRefresh})})}var defineComponent=require("core/component"),withUserActions=require("app/ui/with_user_actions"),withItemActions=require("app/ui/with_item_actions");module.exports=defineComponent(relatedUsers,withUserActions,withItemActions)
});
define("app/boot/related_users",["module","require","exports","app/data/related_users/related_users","app/data/related_users/related_users_scribe","app/ui/related_users/related_users","core/utils"],function(module, require, exports) {
var RelatedUsersData=require("app/data/related_users/related_users"),RelatedUsersScribe=require("app/data/related_users/related_users_scribe"),RelatedUsersModule=require("app/ui/related_users/related_users"),utils=require("core/utils");module.exports=function(b){RelatedUsersScribe.attachTo(document),RelatedUsersData.attachTo(document,{profileId:b.profile_id}),RelatedUsersModule.attachTo(".RelatedUsers",utils.merge({profileHoversEnabled:b.profileHoversEnabled},{eventData:{scribeContext:{component:"related_users"}}}))}
});
define("app/data/profile_recommended_hashtags/profile_recommended_hashtags",["module","require","exports","core/component","core/utils","app/utils/storage/custom","app/data/with_data"],function(module, require, exports) {
function profileRecommendedHashtagsData(){this.defaultAttrs({endpoint:"/i/profile_recommended_hashtags/",profileId:null}),this.requestProfileRecommendedHashtags=function(a,b){this.get({url:this.attr.endpoint+this.attr.profileId,success:"dataProfileRecommendedHashtagsLoaded"})},this.after("initialize",function(){if(!this.attr.profileId)return;this.on(document,"uiLoadProfileRecommendedHashtags",this.requestProfileRecommendedHashtags)})}var defineComponent=require("core/component"),utils=require("core/utils"),customStorage=require("app/utils/storage/custom"),withData=require("app/data/with_data");module.exports=defineComponent(profileRecommendedHashtagsData,withData)
});
define("app/data/profile_recommended_hashtags/profile_recommended_hashtags_scribe",["module","require","exports","core/component","app/data/with_scribe"],function(module, require, exports) {
function profileRecommendedHashtagsScribe(){this.scribeResults=function(a,b){this.scribe("impression",b);var c=(b.hashtags||[]).map(function(a,b){return{name:a,item_type:"trend",position:b}}),d={items:c},e=c.length?"results":"no_results";this.scribe(e,b,d)},this.scribeClick=function(a,b){var c={name:b.hashtag,item_type:"trend",position:b.position},d={item:c};this.scribe("click",b,d)},this.after("initialize",function(){this.on("uiProfileRecommendedHashtagsDisplayed",this.scribeResults),this.on("uiProfileRecommendedHashtagsClicked",this.scribeClick)})}var defineComponent=require("core/component"),withScribe=require("app/data/with_scribe");module.exports=defineComponent(profileRecommendedHashtagsScribe,withScribe)
});
define("app/ui/profile_recommended_hashtags/profile_recommended_hashtags",["module","require","exports","core/component"],function(module, require, exports) {
function profileRecommendedHashtags(){this.defaultAttrs({hashtagsSelector:".ProfileRecommendedHashtags-hashtag-items",hashtagItemSelector:".ProfileRecommendedHashtags-name",responseField:"profile_recommended_hashtag_html",hiddenClass:"u-hidden"}),this.renderProfileRecommendedHashtags=function(a,b){var c=b[this.attr.responseField];c&&(this.select("hashtagsSelector").html(c),this.show()),this.trigger("uiProfileRecommendedHashtagsDisplayed",{hashtags:this.collectVisibleHashtags()})},this.clickProfileRecommendedHashtags=function(a,b){this.trigger("uiProfileRecommendedHashtagsClicked",{hashtag:$(a.target).attr("data-hashtag"),position:$(a.target).closest("li").index()})},this.collectVisibleHashtags=function(){var a=this.select("hashtagItemSelector").map(function(){return $(this).attr("data-hashtag")});return $.makeArray(a)},this.show=function(){this.$node.removeClass(this.attr.hiddenClass)},this.after("initialize",function(){this.on(document,"dataProfileRecommendedHashtagsLoaded",this.renderProfileRecommendedHashtags),this.trigger("uiLoadProfileRecommendedHashtags"),this.on("click",{hashtagItemSelector:this.clickProfileRecommendedHashtags})})}var defineComponent=require("core/component");module.exports=defineComponent(profileRecommendedHashtags)
});
define("app/boot/profile_recommended_hashtags",["module","require","exports","app/data/profile_recommended_hashtags/profile_recommended_hashtags","app/data/profile_recommended_hashtags/profile_recommended_hashtags_scribe","app/ui/profile_recommended_hashtags/profile_recommended_hashtags"],function(module, require, exports) {
var ProfileRecommendedHashtagsData=require("app/data/profile_recommended_hashtags/profile_recommended_hashtags"),ProfileRecommendedHashtagsScribe=require("app/data/profile_recommended_hashtags/profile_recommended_hashtags_scribe"),ProfileRecommendedHashtagsModule=require("app/ui/profile_recommended_hashtags/profile_recommended_hashtags");module.exports=function(b){ProfileRecommendedHashtagsScribe.attachTo(document),ProfileRecommendedHashtagsData.attachTo(document,{profileId:b}),ProfileRecommendedHashtagsModule.attachTo(".ProfileRecommendedHashtags",{eventData:{scribeContext:{component:"profile_recommended_hashtags"}}})}
});
define("app/data/profile_head_scribe",["module","require","exports","core/component","core/utils","app/data/with_scribe"],function(module, require, exports) {
function profileHeadScribe(){this.after("initialize",function(){this.scribeOnEvent("uiAvatarClicked",{element:"avatar",action:"click"}),this.scribeOnEvent("uiFullNameClicked",{element:"fullname",action:"click"}),this.scribeOnEvent("uiUsernameClicked",{element:"username",action:"click"}),this.scribeOnEvent("uiUrlClicked",{element:"url",action:"click"}),this.scribeOnEvent("uiLocationClicked",{element:"place_tag",action:"click"}),this.scribeOnEvent("uiBirthdayClicked",{element:"birthday",action:"click"})})}var defineComponent=require("core/component"),utils=require("core/utils"),withScribe=require("app/data/with_scribe");module.exports=defineComponent(profileHeadScribe,withScribe)
});
define("app/data/profile_heading_scribe",["module","require","exports","core/component","core/utils","app/data/with_scribe"],function(module, require, exports) {
function profileHeadingScribe(){this.defaultAttrs({scribeContext:{component:"profile_heading"},toggleElementSelector:".ProfileHeading-toggleItem"}),this.scribeTogglesImpression=function(){this.select("toggleElementSelector").each(function(a,b){var c=utils.merge(this.attr.scribeContext,{element:$(b).data("element-term"),action:"impression"});this.scribe(c)}.bind(this))},this.after("initialize",function(){this.scribeTogglesImpression()})}var defineComponent=require("core/component"),utils=require("core/utils"),withScribe=require("app/data/with_scribe");module.exports=defineComponent(profileHeadingScribe,withScribe)
});
define("app/data/suggested_users",["module","require","exports","core/component","app/data/with_data","core/utils","app/data/with_interaction_data_scribe"],function(module, require, exports) {
function suggestedUsersData(){this.shouldPerformRequest=function(a){return a&&(a.profileHead||a.isReplacement)},this.getLimit=function(a){return a.isReplacement?1:3},this.getHTML=function(a,b){function c(a){a.html&&(a.isReplacement=b.isReplacement,this.trigger("dataSuggestedUsersSuccess",a))}if(!this.shouldPerformRequest(b))return;this.get({url:"/i/users/suggested_users",data:{user_id:b.userId,pc:!0,limit:this.getLimit(b),display_location:"cluster-follow"},eventData:b,success:c.bind(this),error:"dataSuggestedUsersFailure"})},this.scribeSuggestedUserResults=function(a,b){var c=b.isReplacement?"newer":"initial";this.scribeInteractiveResults({element:c,action:"results"},b.items,b,{referring_event:c,profile_id:b.user_id})},this.after("initialize",function(a,b){this.on("uiSuggestedUsersRendered",this.scribeSuggestedUserResults),this.on("uiFollowAction uiGetClusterFollowReplacementSuggestion",this.getHTML)})}var defineComponent=require("core/component"),withData=require("app/data/with_data"),utils=require("core/utils"),withInteractionDataScribe=require("app/data/with_interaction_data_scribe");module.exports=defineComponent(suggestedUsersData,withData,withInteractionDataScribe)
});
define("app/ui/media/card_thumbnails",["module","require","exports","core/component","core/utils","app/utils/image_thumbnail","app/utils/image/image_loader","core/i18n"],function(module, require, exports) {
function cardThumbnails(){var a=800,b={NOT_LOADED:"not-loaded",LOADING:"loading",LOADED:"loaded"};this.hasMoreItems=!0,this.defaultAttrs({profileUser:!1,mediaGrid:!1,mediaGridOpen:!1,gridPushState:!1,pushStateUrl:"/",defaultGalleryTitle:_('Media Gallery'),viewAllSelector:".list-link",thumbnailSelector:".media-thumbnail",thumbnailContainerSelector:".photo-list",thumbnailPlaceholderSelector:".thumbnail-placeholder.first",thumbnailNotLoadedSelector:'.media-thumbnail[data-load-status="'+b.NOT_LOADED+'"]',thumbnailType:"thumb",thumbnailSize:90,thumbnailsVisible:6,showAllInlineMedia:!1,loadOnEventName:"uiLoadThumbnails",showSensitiveContent:!1,photoRailHeadingTextSelector:".PhotoRail-headingText",photoRailHeadingWithCountClass:"PhotoRail-headingText--withCount",photoRailHeadingWithoutCountClass:"PhotoRail-headingText--withoutCount",dataEvents:{requestItems:"uiWantsMoreMediaTimelineItems",gotItems:"dataGotMoreMediaTimelineItems"},defaultRequestData:{}}),this.thumbs=function(){return this.select("thumbnailSelector")},this.getMaxPosition=function(){var a=this.thumbs();if(a.length)return a.last().attr("data-status-id")},this.shouldGetMoreItems=function(a){var b=$(a.target);if(b.attr("data-paged"))return;this.getMoreItems()},this.getMoreItems=function(){if(!this.hasMoreItems)return;var a=this.thumbs();a.attr("data-paged",!0),this.trigger(document,this.attr.dataEvents.requestItems,utils.merge(this.attr.defaultRequestData,{max_position:this.maxPosition||this.getMaxPosition(),for_photo_rail:!0}))},this.gotMoreItems=function(a,b){if(b.items_html&&$.trim(b.items_html).length){var c=$.isArray(b.items_html)?$(b.items_html.join("")):$(b.items_html);this.appendItems(c)}else this.hasMoreItems=!1;this.trigger(document,"dataGotMoreMediaItems",b),this.select("thumbnailSelector").length<this.attr.thumbnailsVisible&&this.hasMoreItems&&this.getMoreItems()},this.appendItems=function(a){this.attr.gridPushState&&(a.addClass("js-nav"),a.attr("href",this.attr.pushStateUrl)),this.select("thumbnailPlaceholderSelector").before(a),this.updateMaxPosition(),this.removeUnsupportedTypes(),this.renderVisible()},this.updateMaxPosition=function(){this.maxPosition=this.getMaxPosition()},this.removeUnsupportedTypes=function(){this.select("thumbnailSelector").each(function(a,b){var c=$(b);(c.attr("data-card-type")==="summary"||!this.attr.showSensitiveContent&&c.data("possiblySensitive"))&&c.remove()}.bind(this))},this.renderVisible=function(){var a=this.select("thumbnailSelector").slice(0,this.attr.thumbnailsVisible),b=a.filter(this.attr.thumbnailNotLoadedSelector);if(b.length){var c=this.select("photoRailHeadingTextSelector");b.length>=this.attr.thumbnailsVisible?(c.addClass(this.attr.photoRailHeadingWithCountClass),c.removeClass(this.attr.photoRailHeadingWithoutCountClass)):(c.addClass(this.attr.photoRailHeadingWithoutCountClass),c.removeClass(this.attr.photoRailHeadingWithCountClass)),this.loadThumbs(b);var d={thumbnails:[]};b.each(function(a,b){d.thumbnails.push($(b).attr("data-url"))}),this.trigger("uiMediaThumbnailsVisible",d)}else a.length>0&&this.showThumbs();var d={thumbnails:[]};b.each(function(a,b){d.thumbnails.push($(b).attr("data-url"))}),this.trigger("uiMediaThumbnailsVisible",d)},this.loadThumbs=function(a){a.attr("data-load-status",b.LOADING),a.each(this.loadThumb.bind(this))},this.loadThumb=function(a,b){var c=$(b),d=function(a){this.loadThumbSuccess(c,a)}.bind(this),e=function(){this.loadThumbFail(c)}.bind(this);imageLoader.load(c.attr("data-resolved-url-"+this.attr.thumbnailType),d,e)},this.loadThumbSuccess=function(a,c){a.attr("data-load-status",b.LOADED),c.css(imageThumbnail.getThumbnailOffset(c.get(0).height,c.get(0).width,this.attr.thumbnailSize)),a.append(c),this.showThumbs()},this.loadThumbFail=function(a){a.remove(),this.renderVisible()},this.showThumbs=function(){this.$node.show(),this.$node.attr("data-loaded",!0),this.gridAutoOpen()},this.thumbnailClick=function(a){a.stopPropagation(),a.preventDefault(),this.openGallery(a.target);var b=$(a.target),c=b.hasClass("video")?"video":"photo";this.trigger("uiMediaThumbnailClick",{url:b.attr("data-url"),mediaType:c})},this.gridAutoOpen=function(){this.attr.mediaGrid&&this.attr.mediaGridOpen&&this.thumbs().length&&this.viewGrid()},this.viewAllClick=function(a){this.attr.mediaGrid?this.trigger("uiMediaViewAllClick"):(this.openGallery(this.thumbs()[0]),a.preventDefault())},this.showThumbs=function(){this.$node.show(),this.$node.attr("data-loaded",!0),this.attr.mediaGridOpen&&(this.attr.mediaGridOpen=!1,this.viewGrid())},this.viewGrid=function(){this.openGrid(this.thumbs()[0])},this.openGrid=function(a){this.trigger(a,"uiOpenGrid",{gridTitle:this.attr.defaultGalleryTitle,profileUser:this.attr.profileUser})},this.openGallery=function(a){this.trigger(a,"uiOpenGallery",{gridTitle:this.attr.defaultGalleryTitle,showGrid:this.attr.mediaGrid,profileUser:this.attr.profileUser})},this.removeThumbs=function(){this.thumbs().remove()},this.before("teardown",this.removeThumbs),this.after("initialize",function(){this.$node.attr("data-loaded")||(this.$node.hide(),this.trigger("uiMediaThumbnailsVisible",{thumbnails:[]}),this.thumbs().length>0&&this.renderVisible()),this.on("click",{thumbnailSelector:this.thumbnailClick,viewAllSelector:this.viewAllClick}),this.gridAutoOpen(),this.on(document,this.attr.dataEvents.gotItems,this.gotMoreItems),this.on("uiGalleryMediaLoad",this.shouldGetMoreItems),this.attr.showAllInlineMedia?this.getMoreItems():this.on(document,"uiReloadThumbs",this.getMoreItems)})}var defineComponent=require("core/component"),utils=require("core/utils"),imageThumbnail=require("app/utils/image_thumbnail"),imageLoader=require("app/utils/image/image_loader"),_=require("core/i18n"),CardThumbnails=defineComponent(cardThumbnails);module.exports=CardThumbnails
});
define("app/ui/profile/follower_requests_reminder",["module","require","exports","core/component","app/utils/storage/with_expiry"],function(module, require, exports) {
function followerRequestsReminder(){this.namespace="follower_requests_reminder",this.storageKey="until",this.possiblyShowMessage=function(){this.isExpired(this.storageKey)&&(this.showMessage(),this.clear(),this.updateComponentTTL())},this.showMessage=function(){this.trigger("uiShowStickyMessage",{message:this.attr.followerRequestsReminderMessage})},this.updateComponentTTL=function(){var a=2e4,b=864e5;this.attr.environment=="selenium"?this.updateTTL(this.storageKey,a):this.updateTTL(this.storageKey,b)},this.after("initialize",function(){this.on(document,"uiSwiftLoaded uiPageChanged",this.possiblyShowMessage)})}var defineComponent=require("core/component"),withExpiry=require("app/utils/storage/with_expiry");module.exports=defineComponent(followerRequestsReminder,withExpiry)
});
define("app/data/media_timeline",["module","require","exports","core/component","app/data/with_data"],function(module, require, exports) {
function mediaTimeline(){this.requestItems=function(a,b){var c={},d={min_position:b.min_position,max_position:b.max_position,for_photo_rail:b.for_photo_rail};this.attr.forceT1Media&&(d.force_t1_media=!0),this.get({url:this.attr.endpoint,headers:c,data:d,eventData:b,success:"dataGotMoreMediaTimelineItems",error:"dataGotMoreMediaTimelineItemsError"})},this.after("initialize",function(){this.on(document,"uiWantsMoreMediaTimelineItems",this.requestItems)})}var defineComponent=require("core/component"),withData=require("app/data/with_data");module.exports=defineComponent(mediaTimeline,withData)
});
define("app/ui/profile/highline_canopy",["module","require","exports","core/component","core/utils","app/utils/animate_window_scrolltop"],function(module, require, exports) {
function profileCanopy(){var a=$(window);this.defaultAttrs({disableScrollThreshold:!0,scrollDebounceInterval:0,resizeDebounceInterval:5,transitionDuration:300,finalHeaderHeight:20,originalHeaderImagePosition:50,finalHeaderImagePosition:0,parallaxRatio:.5,enabledCanopyViewportThreshold:720,lockedStateClass:"is-locked",defaultStateClass:"is-default",profileHeaderClass:"ProfileCanopy-header",topbarSelector:".topbar",profileHeaderSelector:".ProfileCanopy-header",profileHeaderBgImageSelector:".ProfileCanopy-headerBg img",profileHeaderAvatarSelector:".ProfileCanopy-avatar",profileCardMiniSelector:".ProfileCanopy-card",largeCanopyClass:"ProfileCanopy--large"}),this.scrollRatioForHeader=function(a){return this.canopyLockPosition>0?this.scrollPos/this.canopyLockPosition:1},this.absoluteTransitionThreshold=function(){return this.globalNavHeight+this.profileHeaderHeight},this.withinAbsoluteTransitionThreshold=function(){return this.scrollPos<this.absoluteTransitionThreshold()},this.pastCanopyLockThreshold=function(){return this.scrollPos>=this.canopyLockPosition},this.determineScrollToTop=function(a){this.$node.hasClass(this.attr.lockedStateClass)&&animateWinScrollTop(0,this.attr.transitionDuration)},this.profileCanopyIsLocked=function(){return this.$node.hasClass(this.attr.lockedStateClass)},this.lockProfileCanopy=function(){this.removeAccessibilityOfProfileHeaderAvatar(),this.$node.addClass(this.attr.lockedStateClass),this.lockHeaderParallax()},this.unlockProfileCanopy=function(){this.removeAccessibilityOfMiniProfileCard(),this.$node.removeClass(this.attr.lockedStateClass),this.parallaxTick()},this.removeAccessibilityOfProfileHeaderAvatar=function(){this.removeAccessibility(this.$profileHeaderAvatar),this.reinstateAccessibility(this.$profileCardMini)},this.removeAccessibilityOfMiniProfileCard=function(){this.removeAccessibility(this.$profileCardMini),this.reinstateAccessibility(this.$profileHeaderAvatar)},this.updateNavHeight=function(){this.globalNavHeight=$(this.attr.topbarSelector).height(),this.determineCanopyScrollBehavior()},this.lockHeaderParallax=function(){var a=this.calculateShiftAmount();this.$profileHeaderBgImage.css({transform:"translate3d(0px, "+a+"px, 0)"}),this.$profileHeader.css({"margin-top":this.globalNavHeight-this.canopyLockPosition})},this.parallaxTick=function(){this.parallaxTick.ticking||(this.parallaxTick.ticking=!0,requestAnimationFrame(function(){this.shiftHeaderParallax(),this.parallaxTick.ticking=!1}.bind(this)))},this.calculateShiftAmount=function(){return(this.backgroundImageHeight-this.profileHeaderHeight)*this.attr.parallaxRatio},this.shiftHeaderParallax=function(){this.$profileHeader.css({"margin-top":0});var a=this.scrollRatioForHeader(),b=this.calculateShiftAmount()*a,c;b>0?c={transform:"translate3d(0px, "+b+"px, 0)"}:c={transform:"none"},this.$profileHeaderBgImage.css(c)},this.determineTransition=function(a){this.scrollPos=a,this.enabled&&this.pastCanopyLockThreshold()?this.lockProfileCanopy():this.unlockProfileCanopy()},this.determineCanopyScrollBehavior=function(){this.isEditingProfile||a.height()<this.attr.enabledCanopyViewportThreshold?this.enabled=!1:this.enabled=!0,this.updateCanopyValuesForReflow()},this.profileEditingOn=function(){this.isEditingProfile=!0,this.determineCanopyScrollBehavior()},this.profileEditingOff=function(){this.isEditingProfile=!1,this.determineCanopyScrollBehavior()},this.setResponsiveVariableValues=function(){this.profileHeaderHeight=this.$profileHeader.height(),this.canopyLockPosition=this.profileHeaderHeight-this.attr.finalHeaderHeight},this.updateCanopyValuesForReflow=function(a,b){this.setResponsiveVariableValues(),this.reflowCanopy()},this.reflowCanopy=function(){this.trigger("reflowCanopy",{scrollPos:a.scrollTop()})},this.showLargeCanopy=function(){this.$node.addClass(this.attr.largeCanopyClass)},this.showSmallCanopy=function(){this.$node.removeClass(this.attr.largeCanopyClass)},this.removeAccessibility=function(a){a.attr("aria-hidden",!0).find("a").attr("tabindex","-1")},this.reinstateAccessibility=function(a){a.removeAttr("aria-hidden").find("a").removeAttr("tabindex")},this.after("initialize",function(){this.isEditingProfile=!1,this.scrollPos=0,this.$body=$("body"),this.$window=$(window),this.$profileHeader=this.select("profileHeaderSelector"),this.$profileHeaderBgImage=this.select("profileHeaderBgImageSelector"),this.$profileHeaderAvatar=this.select("profileHeaderAvatarSelector"),this.$profileCardMini=this.select("profileCardMiniSelector"),this.updateNavHeight(),this.backgroundImageHeight=this.$profileHeaderBgImage.height(),this.on(this.$profileHeaderBgImage,"load",function(){this.backgroundImageHeight=this.$profileHeaderBgImage.height()}.bind(this)),this.on(window,"scroll",utils.throttle(function(){this.reflowCanopy()}.bind(this),this.attr.scrollDebounceInterval)),this.on(window,"resize",utils.throttle(function(){this.determineCanopyScrollBehavior()}.bind(this),this.attr.resizeDebounceInterval)),this.on("reflowCanopy",function(a,b){this.determineTransition(b.scrollPos)}),this.on("click",{profileHeaderSelector:this.determineScrollToTop}),this.on(document,"uiProfileEditingOn",this.profileEditingOn),this.on(document,"uiProfileEditingOff",this.profileEditingOff),this.on(document,"uiShowLargeCanopy",this.showLargeCanopy),this.on(document,"uiShowSmallCanopy",this.showSmallCanopy),this.on(document,"uiBannerDismissed",this.updateNavHeight),this.on(document,"uiSwiftLoaded uiPageChanged viewport-update",this.determineCanopyScrollBehavior)})}var defineComponent=require("core/component"),utils=require("core/utils"),animateWinScrollTop=require("app/utils/animate_window_scrolltop");module.exports=defineComponent(profileCanopy)
});
define("app/ui/profile/profile_content_warning",["module","require","exports","core/component"],function(module, require, exports) {
function profileContentWarning(){this.defaultAttrs({warningClass:"is-showingWarning",profileViewTweetsButtonSelector:".BlockedWarningTimeline-button"}),this.showTweets=function(){this.$node.removeClass(this.attr.warningClass)},this.showTweetsWithScribe=function(){this.$node.removeClass(this.attr.warningClass),this.trigger("uiViewBlockedUserTweets")},this.hideTweets=function(){this.$node.addClass(this.attr.warningClass)},this.scribeImpression=function(){this.$node.hasClass(this.attr.warningClass)&&this.trigger("uiBlockedUserWarningImpression")},this.after("initialize",function(){this.on("click",{profileViewTweetsButtonSelector:this.showTweetsWithScribe}),this.on(document,"uiShowProfileTweets",this.showTweets),this.on(document,"uiHideProfileTweets",this.hideTweets),this.scribeImpression()})}var defineComponent=require("core/component");module.exports=defineComponent(profileContentWarning)
});
define("app/data/profile_content_warning_scribe",["module","require","exports","core/component","core/utils","app/data/with_scribe"],function(module, require, exports) {
function profileContentWarningScribe(){this.defaultAttrs({scribeContext:{component:"blocker_interstitial"}}),this.scribeViewBlockedUserTweets=function(a,b){var c=utils.merge(this.attr.scribeContext,{action:"click"});this.scribe(c,b)},this.scribeViewBlockerInterstitialWarning=function(a,b){var c=utils.merge(this.attr.scribeContext,{action:"impression"});this.scribe(c,b)},this.after("initialize",function(){this.on(document,"uiViewBlockedUserTweets",this.scribeViewBlockedUserTweets),this.on(document,"uiBlockedUserWarningImpression",this.scribeViewBlockerInterstitialWarning)})}var defineComponent=require("core/component"),utils=require("core/utils"),withScribe=require("app/data/with_scribe"),ProfileContentWarningScribe=defineComponent(profileContentWarningScribe,withScribe);module.exports=ProfileContentWarningScribe
});
define("app/ui/profile/head",["module","require","exports","core/component","core/i18n","app/ui/with_user_actions","app/ui/with_profile_stats","app/ui/with_handle_overflow","core/utils"],function(module, require, exports) {
function profileHead(){this.defaultAttrs({profileHead:!0,isCanopy:!1,editProfileButtonInlineSelector:".inline-edit-profile-btn",nonEmptyAvatarSelector:".profile-picture .avatar:not(.empty-avatar)",emptyAvatarSelector:".profile-picture .empty-avatar",overflowContainer:".profile-header-inner",itemType:"user",fullNameSelector:".fullname",usernameSelector:".username",urlSelector:".url a",locationSelector:".location a",birthdaySelector:".birthday a"}),this.showAvatarModal=function(a){a.preventDefault(),this.isEditing()||(this.trigger("uiAvatarClicked"),this.trigger(a.target,"uiOpenGallery",{title:_('@{{screenName}}\'s profile photo',{screenName:this.attr.profile_user.screen_name})}))},this.emptyAvatarClicked=function(a){if(!this.isEditing()){a.preventDefault(),a.stopImmediatePropagation();var b=$(a.target).attr("data-scribe-element");$(document).one("uiEditProfileStart",this.showAvatarOptions.bind(this)),this.trigger("uiEditProfileInitialize",{scribeElement:b})}},this.showAvatarOptions=function(){this.trigger("uiShowEditAvatarOptions")},this.editProfileInline=function(a){a.preventDefault();var b=$(a.target).attr("data-scribe-element");this.trigger(document,"uiEditProfileInitialize",{scribeElement:b})},this.isEditing=function(){return $("body").hasClass("profile-editing")},this.fullNameClicked=function(){this.trigger("uiFullNameClicked")},this.usernameClicked=function(){this.trigger("uiUsernameClicked")},this.urlClicked=function(){this.trigger("uiUrlClicked")},this.locationClicked=function(a,b){var c=$(a.target),d=c.data("place-id"),e={scribeData:{message:d}};this.trigger("uiLocationClicked",e)},this.birthdayClicked=function(a){a.preventDefault(),this.trigger("uiBirthdayClicked"),this.trigger("uiBalloonAnimationRequested")},this.notifyDropdownToHide=function(){this.trigger("uiCloseDropdowns")},this.after("initialize",function(){this.checkForOverflow(this.select("overflowContainer")),this.on("click",{nonEmptyAvatarSelector:this.showAvatarModal,emptyAvatarSelector:this.emptyAvatarClicked,editProfileButtonInlineSelector:this.editProfileInline,fullNameSelector:this.fullNameClicked,usernameSelector:this.usernameClicked,urlSelector:this.urlClicked,locationSelector:this.locationClicked,birthdaySelector:this.birthdayClicked}),this.attr.isCanopy&&this.on("uiHideProfileCanopy",this.notifyDropdownToHide),this.attr.eventData=utils.merge(this.attr.eventData||{},{scribeContext:this.attr.scribeContext,profileHead:this.attr.profileHead})})}var defineComponent=require("core/component"),_=require("core/i18n"),withUserActions=require("app/ui/with_user_actions"),withProfileStats=require("app/ui/with_profile_stats"),withHandleOverflow=require("app/ui/with_handle_overflow"),utils=require("core/utils");module.exports=defineComponent(profileHead,withUserActions,withProfileStats,withHandleOverflow)
});
define("app/ui/dm/dm_button",["module","require","exports","core/component","app/data/with_scribe","app/utils/user_dom_data"],function(module, require, exports) {
function DMButton(){this.openDMDialog=function(){this.scribe({element:"dm_button",action:"click"},this.attr.eventData),this.trigger("uiNeedsDMDialog",this.dmDialogData())},this.dmDialogData=function(){return{id:userDomDataUtil.getId(this.$node),screen_name:userDomDataUtil.getScreenName(this.$node),name:userDomDataUtil.getName(this.$node),oto_only:!0}},this.after("initialize",function(){this.on("click",this.openDMDialog)})}var defineComponent=require("core/component"),withScribe=require("app/data/with_scribe"),userDomDataUtil=require("app/utils/user_dom_data");module.exports=defineComponent(DMButton,withScribe)
});
define("app/ui/profile/auto_signup_dialog",["module","require","exports","core/component","app/utils/storage/with_expiry"],function(module, require, exports) {
function autoSignupDialog(){this.namespace="signup_dialog",this.storageKey="until",this.defaultAttrs({skipDisplay:!1}),this.shouldDisplayDialog=function(){return this.expired&&!this.attr.skipDisplay},this.notifyDialogVisibility=function(){this.expired=this.isExpired(this.storageKey),this.shouldDisplayDialog()&&this.trigger(document,"uiWillShowSignupDialog")},this.possiblyShowDialog=function(){this.shouldDisplayDialog()&&(this.showDialog(),this.clear(),this.updateComponentTTL())},this.showDialog=function(){this.trigger("uiOpenSignupDialog")},this.updateComponentTTL=function(){var a=2e4,b=864e5;this.attr.environment=="selenium"?this.updateTTL(this.storageKey,a):this.updateTTL(this.storageKey,b)},this.after("initialize",function(){this.notifyDialogVisibility(),this.on(document,"uiSwiftLoaded uiPageChanged",this.possiblyShowDialog)})}var defineComponent=require("core/component"),withExpiry=require("app/utils/storage/with_expiry");module.exports=defineComponent(autoSignupDialog,withExpiry)
});
define("app/ui/profile/social_proof",["module","require","exports","core/component","app/ui/with_item_actions"],function(module, require, exports) {
function profileSocialProof(){this.defaultAttrs({socialProofAvatarSelector:".social-proof .avatar",followersYouFollowSelector:".followers-you-follow",itemType:"user"}),this.socialProofAvatarClick=function(a,b){this.trigger("uiSocialProofAvatarClick")},this.viewAllFollowersYouFollow=function(a,b){this.trigger("uiFollowersYouFollowLink")},this.after("initialize",function(){this.trigger("uiHasProfileSocialProof"),this.on("click",{socialProofAvatarSelector:this.socialProofAvatarClick,followersYouFollowSelector:this.viewAllFollowersYouFollow})})}var defineComponent=require("core/component"),withItemActions=require("app/ui/with_item_actions"),ProfileSocialProof=defineComponent(profileSocialProof,withItemActions);module.exports=ProfileSocialProof
});
define("app/data/profile_social_proof_scribe",["module","require","exports","core/component","core/utils","app/data/with_scribe"],function(module, require, exports) {
function profileSocialProofScribe(){this.defaultAttrs({scribeContext:{component:"profile_follow_card"}}),this.scribeProfileSocialProof=function(a,b){var c=utils.merge(this.attr.scribeContext,{element:"social_proof",action:"impression"});this.scribe(c,b)},this.scribeSocialProofAvatarClick=function(a,b){var c=utils.merge(this.attr.scribeContext,{element:"social_proof_avatar",action:"click"});this.scribe(c,b)},this.scribeFollowersYouFolowClick=function(a,b){var c=utils.merge(this.attr.scribeContext,{element:"followers_you_follow",action:"click"});this.scribe(c,b)},this.after("initialize",function(){this.on("uiHasProfileSocialProof",this.scribeProfileSocialProof),this.on("uiSocialProofAvatarClick",this.scribeSocialProofAvatarClick),this.on("uiFollowersYouFollowLink",this.scribeFollowersYouFolowClick)})}var defineComponent=require("core/component"),utils=require("core/utils"),withScribe=require("app/data/with_scribe"),ProfileSocialProofScribe=defineComponent(profileSocialProofScribe,withScribe);module.exports=ProfileSocialProofScribe
});
define("app/ui/profile/highline_profile_stats",["module","require","exports","core/component"],function(module, require, exports) {
function profileStats(){this.defaultAttrs({tweetStatTitleSelector:".ProfileNav-item--tweets .ProfileNav-stat--link",tweetStatSelector:".ProfileNav-item--tweets .ProfileNav-value",mediaStatTitleSelector:".ProfileNav-item--media .ProfileNav-stat--link",mediaStatSelector:".ProfileNav-item--media .ProfileNav-value",followingStatTitleSelector:".ProfileNav-item--following .ProfileNav-stat--link",followingStatSelector:".ProfileNav-item--following .ProfileNav-value",followerStatTitleSelector:".ProfileNav-item--followers .ProfileNav-stat--link",followerStatSelector:".ProfileNav-item--followers .ProfileNav-value",favoriteStatTitleSelector:".ProfileNav-item--favorites .ProfileNav-stat--link",favoriteStatSelector:".ProfileNav-item--favorites .ProfileNav-value"}),this.updateProfileStats=function(a,b){b.stats&&b.stats.forEach(function(a){if(this.$node.attr("data-user-id")==a.user_id){var b=this.select(a.stat+"StatSelector"),c=this.select(a.stat+"StatTitleSelector");b.data("is-compact")!=1&&b.html(a.highline_stat_value),c.tooltip("setTitle",a.highline_stat_phrase)}}.bind(this))},this.after("initialize",function(){this.on(document,"dataGotProfileStats",this.updateProfileStats)})}var defineComponent=require("core/component");module.exports=defineComponent(profileStats)
});
define("app/ui/profile/responsive_nav",["module","require","exports","core/component","core/utils"],function(module, require, exports) {
function responsiveNav(){this.defaultAttrs({itemSelector:".ProfileNav-item",moreMenuNavItemSelector:".ProfileNav-item--more",persistentMoreMenuItemSelector:".ProfileNav-dropdownItem.js-persistent",resizeDebounceInterval:10,persistentMoreMenu:!1,moreMenuItemMinimum:2}),this.createNavItems=function(){this.hiddenNavItems=[],this.navItems=[],this.movableItems=[];var a=this.select("persistentMoreMenuItemSelector").length;this.attr.moreMenuItemMinimum-=a,this.attr.moreMenuItemMinimum<0&&(this.attr.moreMenuItemMinimum=0),this.navItems=this.select("itemSelector").get().reverse().map(function(a){var b=$(a),c=new NavItem(b,this);return b.is(this.attr.moreMenuNavItemSelector)&&(this.moreMenuNavItem=c),c.moreItem&&this.movableItems.push(c),c.moreItem&&!c.visible&&this.hiddenNavItems.push(c),c}.bind(this))},this.adaptNav=function(){var a=parseInt(this.$node.css("width"),10),b=this.getWidthOfVisibleNavItems();a<b?this.hideSomeNavItems(a,b):a>b&&this.showSomeNavItems(a,b)},this.getWidthOfVisibleNavItems=function(){return this.navItems.reduce(function(a,b){return b.visible?a+b.width:a},0)},this.hideSomeNavItems=function(a,b){var c=b+(this.moreMenuNavItem.visible?0:this.moreMenuNavItem.width);this.movableItems.forEach(function(b){b.visible&&(this.hiddenNavItems.length<this.attr.moreMenuItemMinimum||c>a)&&(b.hide(),c-=b.width)}.bind(this)),this.moreMenuNavItem.show()},this.showSomeNavItems=function(a,b){var c=b-this.moreMenuNavItem.width,d=[];for(var e=this.hiddenNavItems.length-1;e>=0;e--){var f=this.hiddenNavItems[e];if(!(f.width+c<=a))break;d.push(f),c+=f.width}if(!this.attr.persistentMoreMenu&&this.hiddenNavItems.length==d.length)d.forEach(function(a){a.show()}.bind(this)),this.moreMenuNavItem.hide();else{var g=b;for(var e=0;e<d.length&&this.hiddenNavItems.length>this.attr.moreMenuItemMinimum;e++){var f=d[e];if(!(f.width+g<=a))break;f.show(),g+=f.width}}},this.after("initialize",function(){this.on(window,"resize",utils.debounce(this.adaptNav.bind(this),this.attr.resizeDebounceInterval)),this.createNavItems(),this.adaptNav()})}function NavItem(a,b){this.$item=a,this.nav=b,this.width=a.outerWidth(!0),this.visible=a.is(":visible"),this.moreItem=this.getMoreItem()}var defineComponent=require("core/component"),utils=require("core/utils");module.exports=defineComponent(responsiveNav),NavItem.prototype.show=function(){this.moreItem&&!this.visible&&(this.moreItem.hide(),this.nav.hiddenNavItems.pop()),this.$item.removeClass("is-hidden"),this.visible=!0},NavItem.prototype.hide=function(){this.moreItem&&this.visible&&(this.moreItem.show(),this.nav.hiddenNavItems.push(this)),this.$item.addClass("is-hidden"),this.visible=!1},NavItem.prototype.getMoreItem=function(){if(!this.nav)return;var a=this.nav.$node.find(this.$item.data("more-item"));if(a.length)return new NavItem(a)}
});
define("app/ui/profile/sidebar_arrangement",["module","require","exports","core/component","core/utils"],function(module, require, exports) {
function sidebarArrangement(){this.defaultAttrs({resizeDebounceInterval:10,minimumContentsWidth:1236,leftProfileSidebarSelector:".ProfileSidebar--withLeftAlignment",rightProfileSidebarSelector:".ProfileSidebar--withRightAlignment",moveableModuleSelector:".MoveableModule"}),this.withinMinimumContentWidth=function(a){return a<this.attr.minimumContentsWidth},this.determineSidebarArrangement=function(a){var b=this.select("leftProfileSidebarSelector"),c=this.select("rightProfileSidebarSelector"),d=this.select("moveableModuleSelector");if(c.length){var e=this.withinMinimumContentWidth(a)?b:c;e.append(d)}},this.after("initialize",function(){this.on(document,"uiDetermineSidebarArrangement",function(a,b){this.determineSidebarArrangement(b.windowWidth)}),this.on(window,"resize",utils.debounce(function(){this.trigger("uiDetermineSidebarArrangement",{windowWidth:$(window).width()})}.bind(this),this.attr.resizeDebounceInterval)),this.trigger("uiDetermineSidebarArrangement",{windowWidth:$(window).width()})})}var defineComponent=require("core/component"),utils=require("core/utils");module.exports=defineComponent(sidebarArrangement)
});
define("app/ui/profile/sidebar_tweetbox",["module","require","exports","core/component","core/utils","app/ui/compose/with_tweetbox_initialization"],function(module, require, exports) {
function sidebarTweetbox(){this.defaultAttrs({hasDefaultText:!0,condensedTextAttr:"data-condensed-text",userScreenNameAttr:"data-screen-name",tweetBoxSelector:".tweet-box",tweetButtonSelector:".tweet-action"}),this.getUserScreenName=function(){return this.$node.attr(this.attr.userScreenNameAttr)||""},this.getDefaultText=function(){return this.attr.hasDefaultText?"@"+this.getUserScreenName()+" ":""},this.getCondensedText=function(){return this.$node.attr(this.attr.condensedTextAttr)},this.removeTextUserColor=function(){this.select("tweetBoxSelector").removeClass("u-textUserColor")},this.addTextUserColor=function(){this.select("tweetBoxSelector").addClass("u-textUserColor")},this.disableTweetAction=function(){this.select("tweetButtonSelector").removeClass("u-bgUserColor u-bgUserColorHover u-borderUserColor")},this.enableTweetAction=function(){this.select("tweetButtonSelector").addClass("u-bgUserColor u-bgUserColorHover u-borderUserColor")},this.after("initialize",function(){this.on(this.$node,"uiTweetBoxExpanded",this.removeTextUserColor),this.on(this.$node,"uiTweetBoxCondensed",this.addTextUserColor),this.on(this.$node,"uiDisableTweetAction",this.disableTweetAction),this.on(this.$node,"uiEnableTweetAction",this.enableTweetAction),this.initTweetbox({condensedText:this.getCondensedText(),defaultText:this.getDefaultText()})})}var defineComponent=require("core/component"),utils=require("core/utils"),withTweetboxInitialization=require("app/ui/compose/with_tweetbox_initialization");module.exports=defineComponent(withTweetboxInitialization,sidebarTweetbox)
});
define("app/ui/suggested_users",["module","require","exports","core/component","app/ui/with_user_actions","app/ui/with_item_actions","app/ui/with_interaction_data"],function(module, require, exports) {
function suggestedUsers(){this.defaultAttrs({closeSelector:".js-close",itemType:"user",userSelector:".js-actionable-user",targetSelector:"#suggested-users",childSelector:"",followedButtonSelector:".stream-item .following",lastStreamItemSelector:".stream-end-item",streamItemSelector:".stream-item",streamItemsSelector:"#suggested-users .stream-item",refreshAnimationDuration:200,isClusterFollowReplenishEnabled:!1}),this.getTimelineNodeSelector=function(a){return this.attr.targetSelector+(a?'[data-item-id="'+a+'"]':"")+" "+this.attr.childSelector},this.getPosition=function(a){var b=$(this.attr.streamItemsSelector);return b.index(a.closest(this.attr.streamItemSelector))+1},this.replaceSuggestedUser=function(a,b){var c=$(this.attr.targetSelector).find(this.attr.followedButtonSelector).closest(this.attr.userSelector);if(c.length===0)return;var d=this.getPosition(c),e=$(b.html).find(this.attr.userSelector),f=this.attr.refreshAnimationDuration;c.fadeOut(f,function(){c.replaceWith(e.hide()),e.fadeIn(f)});var g=[this.interactionData(e,{position:d})],h=[{id:e.attr("data-user-id"),impressionId:e.attr("data-impression-id")}];this.trigger("uiSuggestedUsersRendered",{isReplacement:!0,items:g,user_id:b.sourceEventData.userId}),this.trigger("uiUsersDisplayed",{users:h})},this.slideInUsersList=function(a,b){if(this.$node.hasClass("has-content"))return;this.$node.addClass("has-content"),this.$node.html(b.html);var c=this.$node.outerHeight(),d=$(window).scrollTop();d>this.$node.position().top+c?$(window).scrollTop(d+c):this.$node.hide().slideDown();var e=this.$node.find(this.attr.userSelector),f=e.map(function(a,b){return this.interactionData($(b),{position:a})}.bind(this)).get(),g=e.map(function(a,b){var c=$(b);return{id:c.attr("data-user-id"),impressionId:c.attr("data-impression-id")}}).get();this.trigger("uiSuggestedUsersRendered",{items:f,user_id:b.sourceEventData.userId}),this.trigger("uiUsersDisplayed",{users:g})},this.isClusterFollowAction=function(a){return a.closest(this.attr.targetSelector).length>0},this.handleClusterFollow=function(a,b){this.isClusterFollowAction($(a.target))&&this.attr.isClusterFollowReplenishEnabled&&this.trigger("uiGetClusterFollowReplacementSuggestion",{isReplacement:!0})},this.handleSuggestedUsersResults=function(a,b){b.isReplacement?this.replaceSuggestedUser(a,b):this.slideInUsersList(a,b)},this.slideOutContent=function(a,b){this.$node.slideUp(function(){this.$node.empty().show(),this.$node.removeClass("has-content")}.bind(this))},this.after("initialize",function(){this.on(document,"dataSuggestedUsersSuccess",this.handleSuggestedUsersResults),this.on(document,"uiFollowAction",this.handleClusterFollow),this.on("click",{closeSelector:this.slideOutContent})})}var defineComponent=require("core/component"),withUserActions=require("app/ui/with_user_actions"),withItemActions=require("app/ui/with_item_actions"),withInteractionData=require("app/ui/with_interaction_data");module.exports=defineComponent(suggestedUsers,withUserActions,withItemActions,withInteractionData)
});
define("bower_components/flight-viewport/lib/viewport",["module","require","exports","../../flight/lib/utils","../../flight/lib/component"],function(module, require, exports) {
function viewport(){var a="min-width",b="max-width",c="viewport-resize";this.defaultAttrs({breakpoints:[],debounceWait:100,debounceImmediate:!1}),this.onResize=function(_,a){var b=this.findBreakpointFor(a);this.hasChanged(b)&&(this.breakpoint=b,this.trigger("viewport-update",b))},this.hasChanged=function(c){return c[a]!==this.breakpoint[a]||c[b]!==this.breakpoint[b]},this.findBreakpointFor=function(c){var d=this.attr.breakpoints.filter(function(d){var e=d[a]?c.width>=d[a]:!0,f=d[b]?c.width<=d[b]:!0;return e&&f});return d[0]},this.viewport=function(){return{width:this.$window.width()}},this.after("initialize",function(){this.breakpoint={},this.$window=$(window),this.on(c,this.onResize),this.on(window,"resize",utils.debounce(function(){this.trigger(c,this.viewport())}.bind(this),this.attr.debounceWait,this.attr.debounceImmediate)),this.trigger(c,this.viewport())})}var utils=require("../../flight/lib/utils"),defineComponent=require("../../flight/lib/component");module.exports=defineComponent(viewport)
});
define("app/ui/profile/alcohol_brand_follower_notification",["module","require","exports","core/component"],function(module, require, exports) {
function alcoholBrandFollowerNotification(){this.after("initialize",function(){var a=this.attr.profile_user_follows_alcohol_brand;a&&this.$node.trigger("uiShowStickyMessage",{message:a})})}var defineComponent=require("core/component"),AlcoholBrandFollowerNotification=defineComponent(alcoholBrandFollowerNotification);module.exports=AlcoholBrandFollowerNotification
});
define("app/ui/profile/balloons_animation",["module","require","exports","core/component","app/utils/time","app/utils/random","app/utils/params"],function(module, require, exports) {
function BalloonsAnimation(){this.defaultAttrs({playBalloonsAnimation:!1,colors:["Balloon--red","Balloon--blue","Balloon--yellow","Balloon--purple","Balloon--green"],scale:[.6,.8,1],speed:[.21,.25,.3],numberOfBalloons:42,maxBalloonDriftOnXAxis:600,minInitialDelay:500,maxDelayAfterInital:4500,fpsDebuggerBoxClass:"Balloon-fpsDebugger",debuggerBoxParam:"debug"}),this.animationStates={inProgress:0,finished:1},this.balloonsData=[],this.animationStep,this.animationStartTime,this.balloonAnimationRequest,this.viewportSize,this.lastAnimationStepTime=0,this.windowWasBlurred=!1,this.frameCount=0,this.lowestFps=Number.MAX_VALUE,this.highestFps=0,this.averageFps=0,this.easeIn=function(a){return 1-Math.cos(a*(Math.PI/2))},this.pathFunctions=["linear","curve","sinusoidal"],this.linear=function(a,b,c,d){return{xAxis:b*c,yAxis:b*d}},this.curve=function(a,b,c,d){var e=2+a*1;return{xAxis:Math.pow(b,e)*c,yAxis:b*d}},this.sinusoidal=function(a,b,c,d){var e=(2+a*2)/4;return{xAxis:Math.sin(b*Math.PI*e)*c,yAxis:b*d}},this.balloonAnimationDuration=function(a,b){var c=this.attr.speed[b%this.attr.speed.length];return a/c},this.isAnimationInProgress=function(){return this.balloonsData.some(function(a){return a.state==this.animationStates.inProgress},this)},this.setBalloonPosition=function(a,b){var c=this.easeIn(b),d=this[a.chosenPath](a.randomFactor,c,a.xSize,a.ySize),e=a.startPosition.xAxis+d.xAxis,f=a.startPosition.yAxis+d.yAxis;a.$node.css({transform:"matrix("+a.scale+", 0, 0, "+a.scale+", "+e+", -"+f+")"})},this.getAnimationStep=function(){var a=Date.now();!this.animationStartTime&&this.animationStartTime!=0?this.animationStartTime=a:this.calculateFpsInfo(a),this.windowWasBlurred&&(this.windowWasBlurred=!1,this.animationStartTime+=a-this.lastAnimationStepTime),this.lastAnimationStepTime=a;var b=a-this.animationStartTime;this.balloonsData.forEach(function(b){var c=this.animationStartTime+b.delay;if(a>c){var d=a-c,e=d/b.animationDuration;e<=1.2?this.setBalloonPosition(b,e):(b.state=this.animationStates.finished,b.$node.addClass("u-hidden"))}},this),this.isAnimationInProgress()?this.balloonAnimationRequest=window.requestAnimationFrame(this.animationStep):this.cleanUpBalloons()},this.startAnimation=function(){this.animationStep=this.getAnimationStep.bind(this),this.balloonAnimationRequest=window.requestAnimationFrame(this.animationStep)},this.requestAnimation=function(a,b,c){this.isAnimationInProgress()||(this.resetControlVariables(),this.calculateViewPortSize(),this.createBalloons(),this.resetFpsInfo(),this.trigger("uiBalloonAnimationPlayed",{autoplay:a||c&&c.autoplay}),this.startAnimation())},this.chooseBalloon=function(a){var b=this.attr.colors[a%this.attr.colors.length];return["Balloon",b].join(" ")},this.createBalloons=function(){var a=this.pathFunctions.length;for(var b=0;b<this.attr.numberOfBalloons;b++){var c=$("<span>",{"class":this.chooseBalloon(b)});this.$node.append(c);var d=c.height(),e=c.width(),f=this.viewportSize.width-e,g=f*Math.max(b-5,0)/this.attr.numberOfBalloons,h=g+f*Math.min(b+5,this.attr.numberOfBalloons)/this.attr.numberOfBalloons,i={xAxis:random.getRandomInteger(g,h),yAxis:-1*d},j=random.getRandomInteger(i.xAxis,i.xAxis+this.attr.maxBalloonDriftOnXAxis)-this.attr.maxBalloonDriftOnXAxis/2,k=this.pathFunctions[b%a],l=Math.random(),m=random.getRandomInteger(this.attr.minInitialDelay,this.attr.minInitialDelay+this.attr.maxDelayAfterInital),n=Math.abs(j-i.xAxis),o=Math.abs(this.viewportSize.height-i.yAxis),p=this.balloonAnimationDuration(o,b);this.balloonsData.push({$node:c,state:this.animationStates.inProgress,delay:m,animationDuration:p,startPosition:i,scale:this.attr.scale[b%this.attr.scale.length],ySize:o,xSize:n,chosenPath:k,randomFactor:l})}},this.cleanUpBalloons=function(){this.balloonAnimationRequest&&window.cancelAnimationFrame(this.balloonAnimationRequest),this.balloonsData.forEach(function(a){a.$node.remove()}),this.balloonsData=[],this.logFpsInfo()},this.calculateViewPortSize=function(){var a=$(window);this.viewportSize={height:a.height(),width:a.width()}},this.setWindowBlurredFlag=function(){this.windowWasBlurred=!0},this.resetControlVariables=function(){this.balloonsData=[],this.animationStep=undefined,this.animationStartTime=undefined,this.balloonAnimationRequest=undefined,this.viewportSize=undefined,this.lastAnimationStepTime=0,this.windowWasBlurred=!1},this.calculateFpsInfo=function(a){if(a>this.animationStartTime+this.attr.minInitialDelay+this.attr.maxDelayAfterInital/2){var b=Math.round(1e3/(a-this.lastAnimationStepTime)*100)/100;this.frameCount+=1,this.averageFps+=b,this.lowestFps=Math.min(this.lowestFps,b),this.highestFps=Math.max(this.highestFps,b)}},this.resetFpsInfo=function(){this.frameCount=0,this.averageFps=0,this.lowestFps=Number.MAX_VALUE,this.highestFps=0},this.logFpsInfo=function(){!params.fromQuery(window.location)[this.attr.debuggerBoxParam]||(console.log("Average FPS: "+this.averageFps/this.frameCount),console.log("Lowest FPS: "+this.lowestFps),console.log("Highest FPS: "+this.highestFps))},this.after("initialize",function(){this.attr.autoPlayBalloonsAnimation&&this.on(document,"uiSwiftLoaded uiPageChanged",this.requestAnimation.bind(this,!0)),this.on(document,"uiBeforePageChanged",this.cleanUpBalloons),this.on(window,"blur",this.setWindowBlurredFlag),this.on(document,"uiBalloonAnimationRequested",this.requestAnimation.bind(this,!1))}),this.before("teardown",function(){this.cleanUpBalloons()})}var defineComponent=require("core/component"),time=require("app/utils/time"),random=require("app/utils/random"),params=require("app/utils/params");module.exports=defineComponent(BalloonsAnimation)
});
define("app/data/profile/balloons_animation_scribe",["module","require","exports","core/component","core/utils","app/data/with_scribe"],function(module, require, exports) {
function balloonAnimationScribe(){this.defaultAttrs({scribe_element:"balloon_animation",scribeContext:{}}),this.scribeAnimationPlay=function(a,b){var c=b&&b.sourceEventData,d=utils.merge(this.attr.scribeContext,{element:this.attr.scribe_element,action:"play"});this.scribe(d,c||b);if(b&&b.autoplay){var e=utils.merge(this.attr.scribeContext,{element:this.attr.scribe_element,action:"autoplay"});this.scribe(e,c||b)}},this.after("initialize",function(){this.on(document,"uiBalloonAnimationPlayed",this.scribeAnimationPlay)})}var defineComponent=require("core/component"),utils=require("core/utils"),withScribe=require("app/data/with_scribe");module.exports=defineComponent(balloonAnimationScribe,withScribe)
});
define("app/boot/highline_profile",["module","require","exports","app/boot/app","app/boot/highline_inline_edit","app/boot/logged_out","app/boot/trends","app/boot/wtf_module","app/boot/related_users","app/boot/profile_recommended_hashtags","app/data/client_event","app/data/profile_edit_btn_scribe","app/data/profile_head_scribe","app/data/profile_heading_scribe","app/data/suggested_users","app/ui/media/card_thumbnails","app/ui/dropdown_toggle","app/ui/profile/follower_requests_reminder","app/data/media_timeline","app/data/media_thumbnails_scribe","app/ui/navigation_links","app/ui/profile/highline_canopy","app/ui/profile/profile_content_warning","app/data/profile_content_warning_scribe","app/ui/profile/head","app/ui/new_tweet_button","app/ui/dm/dm_button","app/ui/profile/auto_signup_dialog","app/ui/profile/social_proof","app/data/profile_social_proof_scribe","app/ui/profile/highline_profile_stats","app/ui/profile/responsive_nav","app/ui/profile/sidebar_arrangement","app/ui/profile/sidebar_tweetbox","app/ui/suggested_users","bower_components/flight-viewport/lib/viewport","app/ui/profile/alcohol_brand_follower_notification","app/ui/navigation_links","core/i18n","app/ui/multiline_ellipses","core/utils","app/data/commerce/discovery_profile_cta_scribe","app/ui/profile/balloons_animation","app/data/profile/balloons_animation_scribe"],function(module, require, exports) {
var bootApp=require("app/boot/app"),inlineEditBoot=require("app/boot/highline_inline_edit"),loggedOutBoot=require("app/boot/logged_out"),trendsBoot=require("app/boot/trends"),whoToFollowBoot=require("app/boot/wtf_module"),relatedUsersBoot=require("app/boot/related_users"),recommendedHashtagsBoot=require("app/boot/profile_recommended_hashtags"),clientEvent=require("app/data/client_event"),ProfileEditBtnScribe=require("app/data/profile_edit_btn_scribe"),ProfileHeadScribe=require("app/data/profile_head_scribe"),ProfileHeadingScribe=require("app/data/profile_heading_scribe"),SuggestedUsersData=require("app/data/suggested_users"),CardThumbnails=require("app/ui/media/card_thumbnails"),DropdownToggle=require("app/ui/dropdown_toggle"),FollowerRequestsReminder=require("app/ui/profile/follower_requests_reminder"),MediaTimeline=require("app/data/media_timeline"),MediaThumbnailsScribe=require("app/data/media_thumbnails_scribe"),NavigationLinks=require("app/ui/navigation_links"),ProfileCanopy=require("app/ui/profile/highline_canopy"),ProfileContentWarning=require("app/ui/profile/profile_content_warning"),ProfileContentWarningScribe=require("app/data/profile_content_warning_scribe"),ProfileHead=require("app/ui/profile/head"),NewTweetButton=require("app/ui/new_tweet_button"),DMButton=require("app/ui/dm/dm_button"),AutoSignupDialog=require("app/ui/profile/auto_signup_dialog"),ProfileSocialProof=require("app/ui/profile/social_proof"),ProfileSocialProofScribe=require("app/data/profile_social_proof_scribe"),ProfileStats=require("app/ui/profile/highline_profile_stats"),ResponsiveNav=require("app/ui/profile/responsive_nav"),SidebarArrangement=require("app/ui/profile/sidebar_arrangement"),SidebarTweetbox=require("app/ui/profile/sidebar_tweetbox"),SuggestedUsers=require("app/ui/suggested_users"),Viewport=require("bower_components/flight-viewport/lib/viewport"),AlcoholBrandFollowerNotification=require("app/ui/profile/alcohol_brand_follower_notification"),NavigationLinks=require("app/ui/navigation_links"),_=require("core/i18n"),MultilineEllipses=require("app/ui/multiline_ellipses"),utils=require("core/utils"),CommerceDiscoveryCtaScribe=require("app/data/commerce/discovery_profile_cta_scribe"),BalloonsAnimation=require("app/ui/profile/balloons_animation"),BalloonsAnimationScribe=require("app/data/profile/balloons_animation_scribe");module.exports=function(b){bootApp(utils.merge(b,{promoCTASelector:".StreamItem .leadgen-card-forward .promotion-cta"})),loggedOutBoot(b),whoToFollowBoot(".ProfileSidebar .WhoToFollow",b,{wtfOptions:b.wtfOptions,dashboardSelector:".WhoToFollow-users",successClass:"is-visible",disableProfilePopup:!0}),relatedUsersBoot(b),recommendedHashtagsBoot(b.profile_id),AutoSignupDialog.attachTo(".SignupDialog",{environment:b.environment,skipDisplay:!!b.internalReferer||b.skipAutoSignupDialog}),trendsBoot(b),SidebarArrangement.attachTo(".ProfilePage"),b.inlineProfileEditing&&inlineEditBoot(b),MultilineEllipses.attachTo(document),clientEvent.scribeData.profile_id=b.profile_id;var c=".ProfileCanopy";Viewport.attachTo(document,{debounceWait:0,breakpoints:[{"max-width":864},{"min-width":865,"max-width":1200},{"min-width":1201,"max-width":1500},{"min-width":1501,"max-width":1730},{"min-width":1731,"max-width":1930},{"min-width":1931}]}),ProfileCanopy.attachTo(c,b),ProfileContentWarningScribe.attachTo(document),ProfileContentWarning.attachTo(".ProfilePage--withBlockedWarning"),ProfileStats.attachTo(".ProfileNav"),ResponsiveNav.attachTo(".ProfileNav",{persistentMoreMenu:!1,moreMenuItemMinimum:2}),NavigationLinks.attachTo(".ProfileNav",{eventData:{scribeContext:{component:"dashboard_nav"}}}),DropdownToggle.attachTo(".ProfileNav-item--more");var d={scribeContext:{component:"profile_follow_card"}},e=".ProfileCanopy-avatar";ProfileHead.attachTo(e,b,d,{nonEmptyAvatarSelector:".ProfileAvatar-container",emptyAvatarSelector:".ProfileAvatar-placeholder"}),ProfileHeadScribe.attachTo(e);var f=".ProfileNav-item--userActions";ProfileHead.attachTo(f,b,d,{editProfileButtonInlineSelector:b.inlineProfileEditing?".UserActions-editButton":""}),ProfileHeadScribe.attachTo(f);var g=".ProfileHeaderCard";ProfileHead.attachTo(g,b,d,{fullNameSelector:".ProfileHeaderCard-name a",usernameSelector:".ProfileHeaderCard-screenname a",urlSelector:".ProfileHeaderCard-urlText a",locationSelector:".ProfileHeaderCard-locationText a",birthdaySelector:".ProfileHeaderCard-birthdateText a"}),ProfileHeadScribe.attachTo(g);var h=".ProfileCardMini";ProfileHead.attachTo(h,b,{nonEmptyAvatarSelector:".ProfileCardMini-avatar",fullNameSelector:".ProfileNameTruncated a",usernameSelector:" .ProfileCardMini-screenname a",scribeContext:{component:"profile_follow_card_mini"}}),ProfileHeadScribe.attachTo(h),ProfileHeadingScribe.attachTo(".ProfileHeading"),ProfileEditBtnScribe.attachTo(c,d,{editButtonSelector:".ProfileNav .UserActions-editButton"});var i=".ProfileUserList--socialProof";ProfileSocialProofScribe.attachTo(i),ProfileSocialProof.attachTo(i,{socialProofAvatarSelector:".ProfileUserList-facepileItem .Avatar",followersYouFollowSelector:".ProfileUserList-permalink",profileHoversEnabled:b.profileHoversEnabled});var j=".PhotoRail",k={profileUser:b.profile_user,mediaGrid:!0,mediaGridOpen:b.mediaGridOpen,gridPushState:!0,pushStateUrl:"/"+b.profile_user.screen_name+"/media",defaultGalleryTitle:b.profile_user.name,thumbnailContainerSelector:".PhotoRail-mediaBox",thumbnailPlaceholderSelector:".js-photoRailInsertPoint",thumbnailSize:83,thumbnailsVisible:6,showAllInlineMedia:!0,showSensitiveContent:b.showSensitiveContent,eventData:{scribeContext:{component:"dashboard_media"}}};MediaThumbnailsScribe.attachTo(document),MediaTimeline.attachTo(document,{endpoint:"/i/profiles/show/"+b.profile_user.screen_name+"/media_timeline",forceT1Media:!0}),CardThumbnails.attachTo(j,k),SidebarTweetbox.attachTo(".js-profileSidebarTweetbox",{draftTweetId:"profile_"+b.profile_id,eventData:{scribeContext:{component:"tweet_box"}}});var l={eventData:{scribeContext:{component:"profile_sidebar"}}};NewTweetButton.attachTo(".NewTweetButton",l),DMButton.attachTo(".DMButton",l),SuggestedUsersData.attachTo(document),SuggestedUsers.attachTo(".js-profileClusterFollow",{eventData:{scribeContext:{component:"user_similarities_list"}},targetSelector:".ProfileClusterFollow",userSelector:".ProfileCard"},b),b.followerRequestsReminderMessage&&FollowerRequestsReminder.attachTo(".ProfilePage",{followerRequestsReminderMessage:b.followerRequestsReminderMessage,environment:b.environment}),AlcoholBrandFollowerNotification.attachTo(document,b),CommerceDiscoveryCtaScribe.attachTo(document,utils.merge(b,{scribeContext:{component:"commerce"}})),b.profileBirthdateAnimationEnabled&&(BalloonsAnimation.attachTo(".ProfilePage",{autoPlayBalloonsAnimation:b.autoPlayBalloonsAnimation}),BalloonsAnimationScribe.attachTo(document,{scribeContext:{component:"birthday"}}))}
});
define("app/boot/profile_standard_tweet_timeline",["module","require","exports","app/boot/tweet_timeline","app/ui/dynamic_card_watcher","app/ui/dynamic_image_loader"],function(module, require, exports) {
var tweetTimelineBoot=require("app/boot/tweet_timeline"),DynamicCardWatcher=require("app/ui/dynamic_card_watcher"),DynamicImageLoader=require("app/ui/dynamic_image_loader");module.exports=function(b,c){DynamicImageLoader.attachTo(document,{placeholder:".js-media-img-placeholder,.js-adaptive-media-img-placeholder"}),DynamicCardWatcher.attachTo(document,{containerSelector:"#timeline",viewportThreshold:b.hasVineFilter?0:200,profileHoversEnabled:b.profileHoversEnabled}),tweetTimelineBoot(b,b.timeline_url,c,"tweet")}
});
define("app/ui/profile/empty_timeline_owner",["module","require","exports","core/component","app/utils/animate_window_scrolltop"],function(module, require, exports) {
function emptyTimelineOwner(){this.removeNode=function(){this.$node.remove(),animateWinScrollTop(0)},this.after("initialize",function(){this.on(document,"uiTweetSent",this.removeNode)})}var defineComponent=require("core/component"),animateWinScrollTop=require("app/utils/animate_window_scrolltop");module.exports=defineComponent(emptyTimelineOwner)
});
define("app/ui/profile/empty_timeline_tweetbox",["module","require","exports","core/component","app/ui/compose/with_tweetbox_initialization"],function(module, require, exports) {
function emptyTimelineTweetbox(){this.defaultAttrs({preexpandTweetbox:!0,defaultText:""}),this.after("initialize",function(){this.initTweetbox({defaultText:this.attr.defaultText})})}var defineComponent=require("core/component"),withTweetboxInitialization=require("app/ui/compose/with_tweetbox_initialization");module.exports=defineComponent(withTweetboxInitialization,emptyTimelineTweetbox)
});
define("app/ui/prefilled_tweet",["module","require","exports","core/component"],function(module, require, exports) {
function prefilledTweet(){this.defaultAttrs({tweetButtonSelector:".js-tweet-btn",tweetTextSelector:".js-tweet-text"}),this.sendTweet=function(a,b){this.$node.addClass("is-sending"),this.$tweetButton.addClass("disabled"),this.trigger("uiSendPrefilledTweet"),this.trigger("uiSendTweet",{tweetboxId:this.tweetboxId,tweetData:{status:this.tweetText}})},this.handleTweetResponse=function(a){return function(b,c){c.tweetboxId==this.tweetboxId&&a.call(this,b,c)}.bind(this)},this.tweetSent=function(a,b){this.trigger(b.unusual?"uiShowStickyMessage":"uiShowMessage",{message:b.message}),this.trigger("uiTweetSent",b),this.$node.remove()},this.tweetError=function(a,b){this.trigger("uiShowError",{message:b.error||b.message}),this.$node.removeClass("is-sending"),this.$tweetButton.removeClass("disabled")},this.after("initialize",function(){this.$tweetButton=this.select("tweetButtonSelector"),this.tweetText=this.select("tweetTextSelector").text(),this.tweetboxId="prefilled_tweet_"+this.identity,this.on("click",{tweetButtonSelector:this.sendTweet}),this.on(document,"dataTweetSuccess",this.handleTweetResponse(this.tweetSent)),this.on(document,"dataTweetError",this.handleTweetResponse(this.tweetError))})}var defineComponent=require("core/component");module.exports=defineComponent(prefilledTweet)
});
define("app/data/prefilled_tweet_scribe",["module","require","exports","core/component","app/data/with_scribe"],function(module, require, exports) {
function prefilledTweetScribe(){this.scribeSendPrefilledTweet=function(a,b){this.scribe({element:"prefilled_tweet",action:"send_tweet"},b)},this.after("initialize",function(){this.on("uiSendPrefilledTweet",this.scribeSendPrefilledTweet)})}var defineComponent=require("core/component"),withScribe=require("app/data/with_scribe");module.exports=defineComponent(withScribe,prefilledTweetScribe)
});
define("app/ui/profile/scroll_bumps",["module","require","exports","core/component"],function(module, require, exports) {
function scrollBumps(){this.defaultAttrs({moreUsersLinkSelector:".js-more-users-link",itemType:"user"}),this.openScrollBumpDialog=function(a,b){var c=$(b.el);this.trigger("uiOpenScrollBumpDialog",{userIds:c.data("more-user-ids").split(",")}),this.trigger("uiScrollBumpViewMoreLinkClicked"),a.preventDefault()},this.after("initialize",function(){this.on("click",{moreUsersLinkSelector:this.openScrollBumpDialog})})}var defineComponent=require("core/component");module.exports=defineComponent(scrollBumps)
});
define("app/data/profile/scroll_bump_scribe",["module","require","exports","core/component","app/data/with_scribe"],function(module, require, exports) {
function scrollBumpScribe(){this.after("initialize",function(){this.scribeOnEvent("uiScrollBumpViewMoreLinkClicked",{element:"view_more_link",action:"click"})})}var defineComponent=require("core/component"),withScribe=require("app/data/with_scribe");module.exports=defineComponent(withScribe,scrollBumpScribe)
});
define("app/ui/dialogs/profile_scroll_bump",["module","require","exports","core/component","app/ui/with_dialog","app/ui/with_user_actions","app/ui/with_item_actions"],function(module, require, exports) {
function profileScrollBumpDialog(){this.defaultAttrs({itemType:"user",contentSelector:".js-users-list",slideDuration:300,top:47,closeOnOtherDialogOpened:!0}),this.openDialog=function(a,b){this.setContent(""),this.$body.stop(),this.open(),this.trigger("uiGetUsers",{ids:b.userIds})},this.insertUsers=function(a,b){var c=this.$body[0].scrollHeight;this.setContent(b.html);var d=Math.min(this.$body[0].scrollHeight,this.maxContentHeight());this.$body.height(c),this.slideInContent(d)},this.slideInContent=function(a){this.$body.animate({height:a},{duration:this.attr.slideDuration,complete:function(){this.trigger(this.$dialog,"uiDialogContentChanged")}.bind(this)})},this.setContent=function(a){this.$body.css("height",""),this.$node.toggleClass("has-content",!!a),this.$content.html(a)},this.showError=function(a,b){this.setContent($("<p>").addClass("error").html(b.message))},this.maxContentHeight=function(a,b){return this.$window.height()-2*this.attr.top-this.$header.outerHeight()},this.after("initialize",function(){this.$window=$(window),this.$header=this.select("modalHeaderSelector"),this.$body=this.select("modalBodySelector"),this.$content=this.select("contentSelector"),this.on(document,"uiOpenScrollBumpDialog",this.openDialog),this.on(document,"dataUsersSuccess",this.insertUsers),this.on(document,"dataUsersError",this.showError)})}var defineComponent=require("core/component"),withDialog=require("app/ui/with_dialog"),withUserActions=require("app/ui/with_user_actions"),withItemActions=require("app/ui/with_item_actions");module.exports=defineComponent(profileScrollBumpDialog,withDialog,withUserActions,withItemActions)
});
define("app/data/users",["module","require","exports","core/component","app/data/with_data"],function(module, require, exports) {
function users(){this.getUsers=function(a,b){var c={ids:b.ids};this.get({url:"/i/users/html",data:c,eventData:b,success:"dataUsersSuccess",error:"dataUsersError"})},this.getMoreBlockedUserIds=function(a,b){var c;b&&b.cursor?c=b.cursor:c=-1,this.prevCursor=c;var d={max_position:c,block_type:b.blockType},e=function(a){this.trigger("dataGetMoreBlockedUserIdsSuccess",$.extend({},a,{prevCursor:this.prevCursor}))};this.get({url:"/i/users/blocked_ids",data:d,eventData:b,success:e.bind(this),error:"dataGetMoreBlockedUserIdsError"})},this.getUserNameList=function(a,b){var c={ids:b.ids,filter_blocked_users:b.filterBlockedUsers};this.post({url:"/i/users/html/name_list",data:c,eventData:b,success:"dataUserNameListSuccess",error:"dataUserNameListError"})},this.after("initialize",function(){this.on("uiGetUsers",this.getUsers),this.on("uiGetMoreBlockedUserIds",this.getMoreBlockedUserIds),this.on("uiGetUserNameList",this.getUserNameList)})}var defineComponent=require("core/component"),withData=require("app/data/with_data");module.exports=defineComponent(users,withData)
});
define("app/ui/list_actions",["module","require","exports","core/component","core/utils","core/i18n"],function(module, require, exports) {
function listActions(){this.defaultAttrs({win:window,listItemSelector:".list-follow-card",listDataAttr:"data-list-id",editSelector:".js-edit-list-action",subscribeSelector:".js-subscribe-list-action",subscribeClass:"is-subscribed",subscribeClassesForToggle:"is-subscribed js-unfollow-list-action",unsubscribeClassesForToggle:"is-unsubscribed js-follow-list-action",featureListSelector:".js-feature-list-action",featuredListClass:"is-featured",unfeaturedListClass:"is-unfeatured",featureClassesForToggle:"is-featured js-unpin-list-action",unfeatureClassesForToggle:"is-unfeatured js-pin-list-action",deleteSelector:".js-delete-list-action",rerenderListItem:!1,redirectToListPermalinkOnEdit:!1,removeFeaturedListFromPageOnUnfeature:!1}),this.handleAction=function(a,b,c){return function(d,e){var f=this.findListByProximity($(d.target)),g={list_id:this.getListId(f)},h;a==this.attr.subscribeClass?(h=f.hasClass(this.attr.subscribeClass)?"unsubscribe":"subscribe",g=utils.merge(g,{action:h})):a==this.attr.featuredListClass&&(h=f.hasClass(this.attr.featuredListClass)?"unfeature":"feature",g=utils.merge(g,{action:h}));var i=f.hasClass(a)?b:c;this.trigger(f,i,g),a==this.attr.subscribeClass&&this.setSubscribeState(d,{sourceEventData:g})}.bind(this)},this.handleTransition=function(a,b){return function(c,d){var e=this.findListFromEventData(d);e[a](b)}.bind(this)},this.findListFromEventData=function(a){var b=a.list_id||a.sourceEventData.list_id;return this.findListById(this.$node,b)},this.findListById=function(a,b){var c=this.attr.listItemSelector+"["+this.attr.listDataAttr+"="+b+"]";return a.find(c)},this.findListByProximity=function(a){return a.closest(this.attr.listItemSelector)},this.getListId=function(a){return a.attr(this.attr.listDataAttr)},this.updateFollowCard=function(a,b){b.follow_card_html&&this.select("listItemSelector").html(b.follow_card_html)},this.triggerEditListDialog=function(){this.trigger("uiOpenUpdateListDialog",{})},this.setSubscribeStateOnSuccess=function(a,b){this.setSubscribeState(a,b),this.attr.rerenderListItem&&this.trigger("uiRefreshFollowCard",b)},this.setSubscribeState=function(a,b){b.sourceEventData.action=="unsubscribe"?this.setListStateToUnsubscribed(a,b):this.setListStateToSubscribed(a,b)},this.revertSubscribeState=function(a,b){b.sourceEventData.action=="unsubscribe"?this.setListStateToSubscribed(a,b):this.setListStateToUnsubscribed(a,b)},this.setListStateToSubscribed=function(a,b){var c=this.select("subscribeSelector"),d=this.findListFromEventData(b);d.addClass(this.attr.subscribeClass),c.removeClass(this.attr.unsubscribeClassesForToggle).addClass(this.attr.subscribeClassesForToggle)},this.setListStateToUnsubscribed=function(a,b){var c=this.select("subscribeSelector"),d=this.findListFromEventData(b);d.removeClass(this.attr.subscribeClass),c.removeClass(this.attr.subscribeClassesForToggle).addClass(this.attr.unsubscribeClassesForToggle)},this.refreshList=function(a,b){b&&(this.attr.redirectToListPermalinkOnEdit&&b.slug?this.attr.win.location="/"+this.attr.screenName+"/lists/"+b.slug:this.reloadPage())},this.reloadPage=function(a,b){this.attr.win.location.reload(!0)},this.triggerDelete=function(a,b){this.trigger("uiDeleteList",{list_id:this.attr.list_id})},this.redirectToLists=function(){this.attr.win.location="/"+this.attr.screenName+"/lists"},this.confirmUserFeatureListToggle=function(a){return function(b){b.stopImmediatePropagation(),this.trigger(b.target,"uiOpenConfirmDialog",{titleText:a?_('Pin this list on your profile page'):_('Unpin this list from your profile'),bodyText:a?_('This will replace any previously pinned list. Are you sure?'):_('This will remove any previously pinned list. Are you sure?'),cancelText:_('Cancel'),submitText:a?_('Pin'):_('Unpin'),action:"UserFeatureListToggle"})}},this.triggerDeleteListDialog=function(){this.trigger("uiOpenConfirmDialog",{titleText:_('Are you sure you want to delete this list?'),cancelText:_('No'),submitText:_('Yes'),action:"DeleteList"})},this.toggledFeaturedList=function(a,b){var c=this.findListFromEventData(b),d=c.find(this.attr.featureListSelector);b.sourceEventData.action=="unfeature"?this.attr.removeFeaturedListFromPageOnUnfeature?c.slideUp("300",function(){c.remove()}):(c.removeClass(this.attr.featuredListClass),d.removeClass(this.attr.featureClassesForToggle).addClass(this.attr.unfeatureClassesForToggle)):(this.unfeatureOtherLists(a,b),c.addClass(this.attr.featuredListClass),d.removeClass(this.attr.unfeatureClassesForToggle).addClass(this.attr.featureClassesForToggle)),this.showUserFeaturedListToggledMessage(a,b)},this.unfeatureOtherLists=function(a,b){this.select("listItemSelector").find(this.attr.featureListSelector).removeClass(this.attr.featuredListClass).addClass(this.attr.unfeaturedListClass)},this.showUserFeaturedListToggledMessage=function(a,b){this.trigger("uiShowStickyMessage",b)},this.after("initialize",function(){this.on("click",{editSelector:this.triggerEditListDialog,deleteSelector:this.triggerDeleteListDialog,subscribeSelector:this.handleAction(this.attr.subscribeClass,"uiUnsubscribeFromList","uiSubscribeToList"),featureListSelector:this.handleAction(this.attr.featuredListClass,"uiNeedUserUnfeatureListDialog","uiNeedUserFeatureListDialog")}),this.on(document,"uiUserFeatureListToggleConfirm",this.handleAction(this.attr.featuredListClass,"uiDidUserUnfeatureList","uiDidUserFeatureList")),this.on(document,"uiDidUserFeatureList dataFailedToUserUnfeatureList",this.handleTransition("addClass",this.attr.featuredListClass)),this.on(document,"uiDidUserUnfeatureList dataFailedToUserFeatureList",this.handleTransition("removeClass",this.attr.featuredListClass)),this.on(document,"uiNeedUserFeatureListDialog",this.confirmUserFeatureListToggle(!0)),this.on(document,"uiNeedUserUnfeatureListDialog",this.confirmUserFeatureListToggle(!1)),this.on(document,"dataDidUserFeatureList dataDidUserUnfeatureList",this.toggledFeaturedList),this.on(document,"uiDeleteListConfirm",this.triggerDelete),this.on(document,"dataDidUpdateList",this.refreshList),this.on(document,"dataGotFollowCard",this.updateFollowCard),this.on(document,"dataDidSubscribeToList",this.setSubscribeStateOnSuccess),this.on(document,"dataFailedToSubscribeToList",this.revertSubscribeState),this.on(document,"dataDidDeleteList",this.redirectToLists)})}var defineComponent=require("core/component"),utils=require("core/utils"),_=require("core/i18n"),ListActions=defineComponent(listActions);module.exports=ListActions
});
define("app/data/list_actions",["module","require","exports","core/component","app/data/with_data","core/utils"],function(module, require, exports) {
function listActionsData(){this.defaultAttrs({successFromEndpoints:{update:"dataDidUpdateList","subscribe.json":"dataDidSubscribeToList","unsubscribe.json":"dataDidSubscribeToList","destroy.json":"dataDidDeleteList",feature:"dataDidUserFeatureList",unfeature:"dataDidUserUnfeatureList"},errorsFromEndpoints:{update:"dataFailedToUpdateList","subscribe.json":"dataFailedToSubscribeToList","unsubscribe.json":"dataFailedToSubscribeToList","destroy.json":"dataFailedToDeleteList",feature:"dataFailedToUserFeatureList",unfeature:"dataFailedToUserUnfeatureList"},addPhxHeaderForEndpoint:["subscribe.json","unsubscribe.json","destroy.json"]}),this.takeAction=function(a,b,c){var d=function(b){b&&b.message&&this.trigger("uiShowMessage",{message:b.message}),this.trigger(this.attr.successFromEndpoints[a],b)},e=function(b){b&&b.message&&this.trigger("uiShowMessage",{message:b.message}),this.trigger(this.attr.errorsFromEndpoints[a],b)},f={url:"/i/lists/"+a,data:c,eventData:c,success:d.bind(this),error:e.bind(this),retryIfUnavailable:!0};this.attr.addPhxHeaderForEndpoint.indexOf(a)!=-1&&(f=utils.merge(f,{headers:{"X-PHX":!0}})),this.post(f)},this.hitEndpoint=function(a){return this.takeAction.bind(this,a)},this.refreshFollowCard=function(a,b){var c=this.followCardEndpoint;this.get({url:c,data:{},eventData:b,success:"dataGotFollowCard",error:"dataFailedToGetFollowCard"})},this.after("initialize",function(){this.followCardEndpoint=this.attr.follow_card_url,this.on(document,"uiRefreshFollowCard",this.refreshFollowCard),this.on("uiUpdateList",this.hitEndpoint("update")),this.on("uiSubscribeToList",this.hitEndpoint("subscribe.json")),this.on("uiUnsubscribeFromList",this.hitEndpoint("unsubscribe.json")),this.on("uiDeleteList",this.hitEndpoint("destroy.json")),this.on("uiDidUserFeatureList",this.hitEndpoint("feature")),this.on("uiDidUserUnfeatureList",this.hitEndpoint("unfeature"))})}var defineComponent=require("core/component"),withData=require("app/data/with_data"),utils=require("core/utils"),ListActionsData=defineComponent(listActionsData,withData);module.exports=ListActionsData
});
define("app/data/list_actions_scribe",["module","require","exports","core/component","core/utils","app/data/with_scribe"],function(module, require, exports) {
function listActionsScribe(){this.scribeSubscribeOrUnsubscribe=function(a,b){if(b.sourceEventData&&b.sourceEventData.action){var c=utils.merge(this.attr.scribeContext,{element:"subscribe_button",action:b.sourceEventData.action});this.scribe(c,b)}},this.scribeUserFeatureList=function(a,b){if(b.sourceEventData&&b.sourceEventData.action){var c=utils.merge(this.attr.scribeContext,{element:"feature_button",action:b.sourceEventData.action});this.scribe(c,b)}},this.after("initialize",function(){this.on(document,"dataDidSubscribeToList",this.scribeSubscribeOrUnsubscribe),this.on(document,"dataDidUserFeatureList",this.scribeUserFeatureList),this.on(document,"dataDidUserUnfeatureList",this.scribeUserFeatureList)})}var defineComponent=require("core/component"),utils=require("core/utils"),withScribe=require("app/data/with_scribe");module.exports=defineComponent(listActionsScribe,withScribe)
});
define("app/ui/profile/profile_featured_list",["module","require","exports","core/component","app/ui/with_item_actions"],function(module, require, exports) {
function profileFeaturedList(){this.defaultAttrs({userAvatarSelector:".ProfileUserList-facepileItem .Avatar",userListPermalinkSelector:".ProfileUserList-permalink",userListUserCountSelector:".ProfileUserList-userCountLink",userListEditSelector:".ProfileUserList-editAction",userListUnfeatureSelector:".ProfileUserList-removeAction",userListSubscribeSelector:".ProfileUserList-subscribeAction.is-unsubscribed",userListUnsubsribeSelector:".ProfileUserList-subscribeAction.is-subscribed",itemType:"user"}),this.profileFeaturedListAvatarClick=function(a,b){this.trigger("uiProfileFeaturedListAvatarClick")},this.profileFeaturedListPermalinkClick=function(a,b){this.trigger("uiProfileFeaturedListPermalinkClick")},this.profileFeaturedListUserCountClick=function(a,b){this.trigger("uiProfileFeaturedListUserCountClick")},this.profileFeaturedListEditClick=function(a,b){this.trigger("uiProfileFeaturedListEditClick")},this.profileFeaturedListUnfeatureClick=function(a,b){this.trigger("uiProfileFeaturedListUnfeatureClick")},this.profileFeaturedListSubscribeClick=function(a,b){this.trigger("uiProfileFeaturedListSubscribeClick")},this.profileFeaturedListUnsubscribeClick=function(a,b){this.trigger("uiProfileFeaturedListUnsubscribeClick")},this.after("initialize",function(){this.trigger("uiHasProfileFeaturedList"),this.on("click",{userAvatarSelector:this.profileFeaturedListAvatarClick,userListPermalinkSelector:this.profileFeaturedListPermalinkClick,userListUserCountSelector:this.profileFeaturedListUserCountClick,userListEditSelector:this.profileFeaturedListEditClick,userListUnfeatureSelector:this.profileFeaturedListUnfeatureClick,userListSubscribeSelector:this.profileFeaturedListSubscribeClick,userListUnsubsribeSelector:this.profileFeaturedListUnsubscribeClick})})}var defineComponent=require("core/component"),withItemActions=require("app/ui/with_item_actions"),ProfileFeaturedList=defineComponent(profileFeaturedList,withItemActions);module.exports=ProfileFeaturedList
});
define("app/data/profile_featured_list_scribe",["module","require","exports","core/component","core/utils","app/data/with_scribe"],function(module, require, exports) {
function profileFeaturedListScribe(){this.defaultAttrs({scribeContext:{component:"profile_sidebar"}}),this.scribeProfileFeaturedList=function(a,b){var c=utils.merge(this.attr.scribeContext,{element:"featured_list",action:"impression"});this.scribe(c,b)},this.scribeProfileFeaturedListAvatarClick=function(a,b){var c=utils.merge(this.attr.scribeContext,{element:"featured_list_avatar",action:"click"});this.scribe(c,b)},this.scribeProfileFeaturedListPermalinkClick=function(a,b){var c=utils.merge(this.attr.scribeContext,{element:"featured_list_permalink",action:"click"});this.scribe(c,b)},this.scribeProfileFeaturedListUserCountClick=function(a,b){var c=utils.merge(this.attr.scribeContext,{element:"featured_list_user_count",action:"click"});this.scribe(c,b)},this.scribeProfileFeaturedListEditClick=function(a,b){var c=utils.merge(this.attr.scribeContext,{element:"featured_list_edit",action:"click"});this.scribe(c,b)},this.scribeProfileFeaturedListUnfeatureClick=function(a,b){var c=utils.merge(this.attr.scribeContext,{element:"featured_list_unfeature",action:"click"});this.scribe(c,b)},this.scribeProfileFeaturedListSubscribeClick=function(a,b){var c=utils.merge(this.attr.scribeContext,{element:"featured_list_subscribe",action:"click"});this.scribe(c,b)},this.scribeProfileFeaturedListUnsubscribeClick=function(a,b){var c=utils.merge(this.attr.scribeContext,{element:"featured_list_unsubscribe",action:"click"});this.scribe(c,b)},this.after("initialize",function(){this.on("uiHasProfileFeaturedList",this.scribeProfileFeaturedList),this.on("uiProfileFeaturedListAvatarClick",this.scribeProfileFeaturedListAvatarClick),this.on("uiProfileFeaturedListPermalinkClick",this.scribeProfileFeaturedListPermalinkClick),this.on("uiProfileFeaturedListUserCountClick",this.scribeProfileFeaturedListUserCountClick),this.on("uiProfileFeaturedListEditClick",this.scribeProfileFeaturedListEditClick),this.on("uiProfileFeaturedListUnfeatureClick",this.scribeProfileFeaturedListUnfeatureClick),this.on("uiProfileFeaturedListSubscribeClick",this.scribeProfileFeaturedListSubscribeClick),this.on("uiProfileFeaturedListUnsubscribeClick",this.scribeProfileFeaturedListUnsubscribeClick)})}var defineComponent=require("core/component"),utils=require("core/utils"),withScribe=require("app/data/with_scribe"),ProfileFeaturedListScribe=defineComponent(profileFeaturedListScribe,withScribe);module.exports=ProfileFeaturedListScribe
});
define("app/pages/profile/highline_landing",["module","require","exports","app/boot/highline_profile","app/boot/tweet_timeline","app/boot/profile_standard_tweet_timeline","app/boot/user_completion_module","app/ui/profile/empty_timeline_owner","app/ui/profile/empty_timeline_tweetbox","app/ui/prefilled_tweet","app/data/prefilled_tweet_scribe","app/ui/profile/profile_card","app/data/profile_card_scribe","app/ui/profile/scroll_bumps","app/data/profile/scroll_bump_scribe","app/ui/dialogs/profile_scroll_bump","app/data/users","app/ui/list_actions","app/data/list_actions","app/data/list_actions_scribe","app/ui/profile/profile_featured_list","app/data/profile_featured_list_scribe","core/utils"],function(module, require, exports) {
var profileBoot=require("app/boot/highline_profile"),tweetTimelineBoot=require("app/boot/tweet_timeline"),standardTweetTimelineBoot=require("app/boot/profile_standard_tweet_timeline"),userCompletionModuleBoot=require("app/boot/user_completion_module"),EmptyTimelineOwner=require("app/ui/profile/empty_timeline_owner"),EmptyTimelineTweetbox=require("app/ui/profile/empty_timeline_tweetbox"),PrefilledTweet=require("app/ui/prefilled_tweet"),PrefilledTweetScribe=require("app/data/prefilled_tweet_scribe"),ProfileCard=require("app/ui/profile/profile_card"),ProfileCardScribe=require("app/data/profile_card_scribe"),ScrollBumps=require("app/ui/profile/scroll_bumps"),ScrollBumpScribe=require("app/data/profile/scroll_bump_scribe"),ScrollBumpDialog=require("app/ui/dialogs/profile_scroll_bump"),UsersData=require("app/data/users"),ListActions=require("app/ui/list_actions"),ListActionsData=require("app/data/list_actions"),ListActionsScribe=require("app/data/list_actions_scribe"),ProfileFeaturedList=require("app/ui/profile/profile_featured_list"),ProfileFeaturedListScribe=require("app/data/profile_featured_list_scribe"),utils=require("core/utils");module.exports=function(b){profileBoot(b),standardTweetTimelineBoot(utils.merge(b,{useDeduping:!0}),"swift_profile_tweets"),userCompletionModuleBoot(b),b.profile_user&&$(document).trigger("profileVisit",b.profile_user),ProfileCard.attachTo("#timeline"),ProfileCardScribe.attachTo(document),ScrollBumps.attachTo("#timeline",{loggedIn:b.loggedIn,eventData:{scribeContext:{component:"user_scroll_bump"}}}),ScrollBumpScribe.attachTo(document),ScrollBumpDialog.attachTo(".ScrollBumpDialog",b,{itemType:"user",eventData:{scribeContext:{component:"scroll_bump_dialog"}}}),UsersData.attachTo(document),b.isCurrentUser&&EmptyTimelineOwner.attachTo(".js-empty-timeline"),EmptyTimelineTweetbox.attachTo(".js-profileEmptyTimelineTweetbox",{draftTweetId:"empty_profile_"+b.profile_id+"_"+(b.isCurrentUser?"owner":"viewer"),defaultText:b.isCurrentUser?"":"@"+b.profile_user.screen_name+" ",eventData:{scribeContext:{component:"empty_timeline"}}});var c=".ProfileUserList--featuredList";ListActions.attachTo(document,b,{listItemSelector:c,subscribeSelector:".ProfileUserList-subscribeAction",featureListSelector:".js-actionFeatureList",removeFeaturedListFromPageOnUnfeature:!0}),ListActionsData.attachTo(document,b),ListActionsScribe.attachTo(document,b,{scribeContext:{component:"profile_sidebar"}}),ProfileFeaturedListScribe.attachTo(c),ProfileFeaturedList.attachTo(c,{profileHoversEnabled:b.profileHoversEnabled}),PrefilledTweet.attachTo(".ProfilePrefilledTweet",{eventData:{scribeContext:{component:"empty_timeline"}}}),PrefilledTweetScribe.attachTo(document)}
});
define("app/pages/profile/highline_tweets",["module","require","exports","app/boot/highline_profile","app/boot/profile_standard_tweet_timeline","core/utils"],function(module, require, exports) {
var profileBoot=require("app/boot/highline_profile"),standardTweetTimelineBoot=require("app/boot/profile_standard_tweet_timeline"),utils=require("core/utils");module.exports=function(b){profileBoot(b),standardTweetTimelineBoot(utils.merge(b,{useDeduping:!0}))}
});
define("app/pages/profile/highline_favorites",["module","require","exports","app/boot/highline_profile","app/boot/profile_standard_tweet_timeline","core/utils"],function(module, require, exports) {
var profileBoot=require("app/boot/highline_profile"),standardTweetTimelineBoot=require("app/boot/profile_standard_tweet_timeline"),utils=require("core/utils");module.exports=function(b){profileBoot(b),standardTweetTimelineBoot(b,"swift_favorites_timeline")}
});
define("app/ui/timelines/follower_request_timeline",["module","require","exports","core/component","app/ui/with_interaction_data"],function(module, require, exports) {
function followerRequestTimeline(){this.defaultAttrs({userItemSelector:"div.js-follower-request",streamUserItemSelector:"li.js-stream-item",followerActionsSelector:".friend-actions",profileActionsSelector:".js-profile-actions",acceptFollowerSelector:".js-action-accept",declineFollowerSelector:".js-action-deny",itemType:"user"}),this.findUser=function(a){return this.$node.find(this.attr.userItemSelector+"[data-user-id="+a+"]")},this.findFollowerActions=function(a){return this.findUser(a).find(this.attr.followerActionsSelector)},this.findProfileActions=function(a){return this.findUser(a).find(this.attr.profileActionsSelector)},this.handleAcceptSuccess=function(a,b){var c=this.findFollowerActions(b.userId),d=this.findProfileActions(b.userId);c.fadeOut(300,function(){d.fadeIn(300)})},this.handleDeclineSuccess=function(a,b){var c=this.findUser(b.userId);c.closest(this.attr.streamUserItemSelector).remove()},this.handleDecisionFailure=function(a,b){var c=this.findFollowerActions(b.userId);c.find(".btn").attr("disabled",!1).removeClass("pending")},this.handleFollowerDecision=function(a){return function(b,c){b.preventDefault(),b.stopPropagation();var d=this.interactionData(b),e=this.findFollowerActions(d.userId);e.find(".btn").attr("disabled",!0);var f=e.find(a=="Accept"?this.attr.acceptFollowerSelector:this.attr.declineFollowerSelector);f.addClass("pending"),this.trigger("uiDidFollower"+a,d)}},this.after("initialize",function(){this.on("click",{acceptFollowerSelector:this.handleFollowerDecision("Accept"),declineFollowerSelector:this.handleFollowerDecision("Decline")}),this.on(document,"dataFollowerAcceptSuccess",this.handleAcceptSuccess),this.on(document,"dataFollowerDeclineSuccess",this.handleDeclineSuccess),this.on(document,"dataFollowerAcceptFailure dataFollowerDeclineFailure",this.handleDecisionFailure)})}var defineComponent=require("core/component"),withInteractionData=require("app/ui/with_interaction_data");module.exports=defineComponent(followerRequestTimeline,withInteractionData)
});
define("app/data/follower_request",["module","require","exports","core/component","app/data/with_data"],function(module, require, exports) {
function followerRequestData(){this.followerRequestAction=function(a,b){return function(c,d){var e=function(a){this.trigger("dataFollower"+b+"Success",{userId:d.userId,pendingRequestsHtml:a.pendingRequestsHtml})}.bind(this),f=function(){this.trigger("dataFollower"+b+"Failure",{userId:d.userId})}.bind(this);this.post({url:a,data:{user_id:d.userId},eventData:d,success:e,error:f})}},this.after("initialize",function(){this.on(document,"uiDidFollowerAccept",this.followerRequestAction("/i/user/accept","Accept")),this.on(document,"uiDidFollowerDecline",this.followerRequestAction("/i/user/deny","Decline"))})}var defineComponent=require("core/component"),withData=require("app/data/with_data");module.exports=defineComponent(followerRequestData,withData)
});
define("app/data/follower_request_scribe",["module","require","exports","core/component","app/data/with_scribe"],function(module, require, exports) {
function followerRequestScribe(){this.after("initialize",function(){this.scribeOnEvent("dataFollowerAcceptSuccess",{component:"user",action:"accept"}),this.scribeOnEvent("dataFollowerDeclineSuccess",{component:"user",action:"decline"})})}var defineComponent=require("core/component"),withScribe=require("app/data/with_scribe");module.exports=defineComponent(withScribe,followerRequestScribe)
});
define("app/ui/profile/pending_followers_title",["module","require","exports","core/component"],function(module, require, exports) {
function pendingFollowersTitle(){this.defaultAttrs({pendingFollowersTitleSelector:".ProfileHeading-pendingFollowersText"}),this.handlePendingFollowerChange=function(a,b){b.pendingRequestsHtml&&this.select("pendingFollowersTitleSelector").html(b.pendingRequestsHtml)},this.after("initialize",function(){this.on(document,"dataFollowerAcceptSuccess",this.handlePendingFollowerChange),this.on(document,"dataFollowerDeclineSuccess",this.handlePendingFollowerChange)})}var defineComponent=require("core/component");module.exports=defineComponent(pendingFollowersTitle)
});
define("app/pages/profile/highline_follower_requests",["module","require","exports","app/boot/highline_profile","app/boot/user_grid_timeline","app/ui/timelines/follower_request_timeline","app/data/follower_request","app/data/follower_request_scribe","app/ui/profile/profile_card","app/data/profile_card_scribe","app/ui/profile/pending_followers_title","core/utils"],function(module, require, exports) {
var profileBoot=require("app/boot/highline_profile"),userGridTimelineBoot=require("app/boot/user_grid_timeline"),FollowerRequestTimeline=require("app/ui/timelines/follower_request_timeline"),FollowerRequestData=require("app/data/follower_request"),FollowerRequestScribe=require("app/data/follower_request_scribe"),ProfileCard=require("app/ui/profile/profile_card"),ProfileCardScribe=require("app/data/profile_card_scribe"),PendingFollowersTitle=require("app/ui/profile/pending_followers_title"),utils=require("core/utils");module.exports=function(b){profileBoot(b),userGridTimelineBoot(b),FollowerRequestTimeline.attachTo(".GridTimeline",b,{userItemSelector:"div.js-actionable-user",streamUserItemSelector:".js-stream-item",followerActionsSelector:".js-acceptDeclineActions",profileActionsSelector:".js-userActions",acceptFollowerSelector:".js-actionAccept",declineFollowerSelector:".js-actionDeny"}),FollowerRequestData.attachTo(document,b),FollowerRequestScribe.attachTo(document),ProfileCard.attachTo(".GridTimeline"),ProfileCardScribe.attachTo(document),PendingFollowersTitle.attachTo(document)}
});
define("app/pages/profile/highline_followers",["module","require","exports","app/boot/highline_profile","app/boot/user_grid_timeline","app/ui/profile/profile_card","app/data/profile_card_scribe","core/utils"],function(module, require, exports) {
var profileBoot=require("app/boot/highline_profile"),userGridTimelineBoot=require("app/boot/user_grid_timeline"),ProfileCard=require("app/ui/profile/profile_card"),ProfileCardScribe=require("app/data/profile_card_scribe"),utils=require("core/utils");module.exports=function(b){profileBoot(b),userGridTimelineBoot(b),ProfileCard.attachTo(".GridTimeline"),ProfileCardScribe.attachTo(document)}
});
define("app/pages/profile/highline_following",["module","require","exports","app/boot/highline_profile","app/boot/user_grid_timeline","app/ui/profile/profile_card","app/data/profile_card_scribe","core/utils"],function(module, require, exports) {
var profileBoot=require("app/boot/highline_profile"),userGridTimelineBoot=require("app/boot/user_grid_timeline"),ProfileCard=require("app/ui/profile/profile_card"),ProfileCardScribe=require("app/data/profile_card_scribe"),utils=require("core/utils");module.exports=function(b){profileBoot(b),userGridTimelineBoot(b),ProfileCard.attachTo(".GridTimeline"),ProfileCardScribe.attachTo(document)}
});
define("app/pages/profile/highline_media",["module","require","exports","app/boot/highline_profile","app/boot/profile_standard_tweet_timeline","core/utils"],function(module, require, exports) {
var profileBoot=require("app/boot/highline_profile"),standardTweetTimelineBoot=require("app/boot/profile_standard_tweet_timeline"),utils=require("core/utils");module.exports=function(b){profileBoot(b),standardTweetTimelineBoot(utils.merge(b,{autoLoadPublisherIds:[]}))}
});
define("app/ui/timelines/list_timeline",["module","require","exports","core/component","app/ui/timelines/base_timeline","app/ui/timelines/with_old_items","app/ui/timelines/with_min_max_pagination","app/ui/with_item_actions","app/ui/with_user_actions"],function(module, require, exports) {
function listTimeline(){this.defaultAttrs({itemType:"list"})}var defineComponent=require("core/component"),BaseTimeline=require("app/ui/timelines/base_timeline"),withOldItems=require("app/ui/timelines/with_old_items"),withMinMaxPagination=require("app/ui/timelines/with_min_max_pagination"),withItemActions=require("app/ui/with_item_actions"),withUserActions=require("app/ui/with_user_actions");module.exports=BaseTimeline.mixin(listTimeline,withOldItems,withMinMaxPagination,withItemActions,withUserActions)
});
define("app/ui/profile/list_create_button",["module","require","exports","core/component"],function(module, require, exports) {
function listCreateButton(){this.defaultAttrs({createListSelector:".js-create-list-button"}),this.openListCreateDialog=function(){this.trigger("uiOpenCreateListDialog")},this.after("initialize",function(){this.on("click",{createListSelector:this.openListCreateDialog})})}var defineComponent=require("core/component");module.exports=defineComponent(listCreateButton)
});
define("app/pages/profile/highline_lists",["module","require","exports","app/boot/highline_profile","app/boot/timeline","app/ui/timelines/list_timeline","app/ui/profile/list_create_button","app/ui/list_actions","app/data/list_actions","app/data/list_actions_scribe","app/data/tweet_actions","core/utils"],function(module, require, exports) {
var profileBoot=require("app/boot/highline_profile"),timelineBoot=require("app/boot/timeline"),ListTimeline=require("app/ui/timelines/list_timeline"),ListCreateButton=require("app/ui/profile/list_create_button"),ListActions=require("app/ui/list_actions"),ListActionsData=require("app/data/list_actions"),ListActionsScribe=require("app/data/list_actions_scribe"),TweetActionsData=require("app/data/tweet_actions"),utils=require("core/utils");module.exports=function(b){profileBoot(b),ListCreateButton.attachTo(".ListCreationModule",{createListSelector:".ListCreationModule-action .btn"}),ListActions.attachTo(document,b,{listItemSelector:".ProfileListItem",featureListSelector:".js-actionFeatureList"}),ListActionsData.attachTo(document,b),ListActionsScribe.attachTo(document,b,{scribeContext:{component:"list_stream_item"}});var c=utils.merge(b,{endpoint:b.timeline_url,itemType:"list",eventData:{scribeContext:{component:"stream"}}});timelineBoot(c),ListTimeline.attachTo(".GridTimeline",{containerSelector:".GridTimeline-items",itemsSelector:".GridTimeline-items",timelineEndSelector:".GridTimeline-end",errorMessageSelector:".GridTimeline-footer .Icon--fail",streamItemsSelector:".GridTimeline-items"}),TweetActionsData.attachTo(document,b)}
});
define("app/ui/timelines/custom_timelines_timeline",["module","require","exports","core/component","app/ui/timelines/base_timeline","app/ui/with_item_actions","app/ui/with_user_actions"],function(module, require, exports) {
function customTimelinesTimeline(){this.defaultAttrs({itemType:"custom-timeline"})}var defineComponent=require("core/component"),BaseTimeline=require("app/ui/timelines/base_timeline"),withItemActions=require("app/ui/with_item_actions"),withUserActions=require("app/ui/with_user_actions");module.exports=BaseTimeline.mixin(customTimelinesTimeline,withItemActions,withUserActions)
});
define("app/pages/profile/highline_custom_timelines",["module","require","exports","core/component","app/boot/highline_profile","app/boot/timeline","app/ui/timelines/custom_timelines_timeline","app/ui/with_custom_timeline_create_button","app/data/curation","core/utils"],function(module, require, exports) {
var defineComponent=require("core/component"),profileBoot=require("app/boot/highline_profile"),timelineBoot=require("app/boot/timeline"),CustomTimelinesTimeline=require("app/ui/timelines/custom_timelines_timeline"),withCustomTimelineCreateButton=require("app/ui/with_custom_timeline_create_button"),CurationData=require("app/data/curation"),utils=require("core/utils");module.exports=function(b){profileBoot(b),defineComponent(withCustomTimelineCreateButton).attachTo(".ListCreationModule",{createCustomTimelineSelector:".ListCreationModule-action .btn"});var c=utils.merge(b,{endpoint:b.timeline_url,itemType:"custom-timeline",eventData:{scribeContext:{component:"stream"}}});timelineBoot(c),CustomTimelinesTimeline.attachTo(".GridTimeline",{containerSelector:".GridTimeline-items",itemsSelector:".GridTimeline-items",timelineEndSelector:".GridTimeline-end",errorMessageSelector:".GridTimeline-footer .Icon--fail",streamItemsSelector:".GridTimeline-items"}),CurationData.attachTo(document,b)}
});